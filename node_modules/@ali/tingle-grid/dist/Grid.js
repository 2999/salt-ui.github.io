'use strict';

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
* Collection Component for tingle
* @author gnosaij
*
* Copyright 2014-2016, Tingle Team, Alinw.
* All rights reserved.
*/
var classnames = require('classnames');
var Context = require('@ali/tingle-context');

var _require = require('@ali/tingle-box');

var VBox = _require.VBox;

var Row = require('./Row');

var prefixClass = Context.prefixClass;

var Grid = function (_React$Component) {
    _inherits(Grid, _React$Component);

    function Grid(props) {
        _classCallCheck(this, Grid);

        return _possibleConstructorReturn(this, (Grid.__proto__ || Object.getPrototypeOf(Grid)).call(this, props));
    }

    /**
    * 将子元素的索引值根据列数划分成组
    * @returns {Array}
    */


    _createClass(Grid, [{
        key: 'cutIndexesIntoRows',
        value: function cutIndexesIntoRows() {
            var t = this;
            var rowIndexes = [];
            var childrenCount = React.Children.count(t.props.children);
            var dummyIndexArray = [];
            var dummyIndex = 0;
            while (childrenCount-- > 0) {
                dummyIndexArray.push(dummyIndex++);
            }

            while (dummyIndexArray.length) {
                rowIndexes.push(dummyIndexArray.splice(0, t.props.col));
            }

            return rowIndexes;
        }
    }, {
        key: 'render',
        value: function render() {
            var _classnames;

            var t = this;
            // react0.14
            var children = React.Children.toArray(t.props.children);

            var rows = t.cutIndexesIntoRows();
            var _t$props = t.props;
            var className = _t$props.className;
            var noLine = _t$props.noLine;

            var rowProps = _objectWithoutProperties(_t$props, ['className', 'noLine']);

            return React.createElement(
                'div',
                { className: classnames(prefixClass('grid'), (_classnames = {}, _defineProperty(_classnames, className, !!className), _defineProperty(_classnames, prefixClass('no-line'), noLine), _defineProperty(_classnames, prefixClass('grid-touchable'), this.props.touchable), _classnames)) },
                rows.map(function (indexes, i) {
                    return React.createElement(
                        Row,
                        _extends({}, rowProps, { key: i }),
                        indexes.map(function (index) {
                            return children[index];
                        })
                    );
                })
            );
        }
    }]);

    return Grid;
}(React.Component);

Grid.defaultProps = {
    className: '',
    col: 4,
    square: false,
    noLine: false,
    itemHAlign: 'center',
    itemVAlign: 'center',
    touchable: false
};

// http://facebook.github.io/react/docs/reusable-components.html
Grid.propTypes = {
    className: React.PropTypes.string,
    // 列数
    col: React.PropTypes.number,
    // 是否自适应单元格的高度 使单元格成为正方形
    square: React.PropTypes.bool,
    // 是否隐藏分割线
    noLine: React.PropTypes.bool,
    // 单个格子的水平对其方式
    itemHAlign: VBox.propTypes.hAlign,
    // 单个格子的垂直对其方式
    itemVAlign: VBox.propTypes.vAlign,
    // 单元格是否可点击
    touchable: React.PropTypes.bool
};

Grid.displayName = 'Grid';

module.exports = Grid;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkdyaWQuanMiXSwibmFtZXMiOlsiY2xhc3NuYW1lcyIsInJlcXVpcmUiLCJDb250ZXh0IiwiVkJveCIsIlJvdyIsInByZWZpeENsYXNzIiwiR3JpZCIsInByb3BzIiwidCIsInJvd0luZGV4ZXMiLCJjaGlsZHJlbkNvdW50IiwiUmVhY3QiLCJDaGlsZHJlbiIsImNvdW50IiwiY2hpbGRyZW4iLCJkdW1teUluZGV4QXJyYXkiLCJkdW1teUluZGV4IiwicHVzaCIsImxlbmd0aCIsInNwbGljZSIsImNvbCIsInRvQXJyYXkiLCJyb3dzIiwiY3V0SW5kZXhlc0ludG9Sb3dzIiwiY2xhc3NOYW1lIiwibm9MaW5lIiwicm93UHJvcHMiLCJ0b3VjaGFibGUiLCJtYXAiLCJpbmRleGVzIiwiaSIsImluZGV4IiwiQ29tcG9uZW50IiwiZGVmYXVsdFByb3BzIiwic3F1YXJlIiwiaXRlbUhBbGlnbiIsIml0ZW1WQWxpZ24iLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJzdHJpbmciLCJudW1iZXIiLCJib29sIiwiaEFsaWduIiwidkFsaWduIiwiZGlzcGxheU5hbWUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7QUFPQSxJQUFNQSxhQUFhQyxRQUFRLFlBQVIsQ0FBbkI7QUFDQSxJQUFNQyxVQUFVRCxRQUFRLHFCQUFSLENBQWhCOztlQUNlQSxRQUFRLGlCQUFSLEM7O0lBQVJFLEksWUFBQUEsSTs7QUFDUCxJQUFNQyxNQUFNSCxRQUFRLE9BQVIsQ0FBWjs7QUFFQSxJQUFNSSxjQUFjSCxRQUFRRyxXQUE1Qjs7SUFFTUMsSTs7O0FBRUYsa0JBQVlDLEtBQVosRUFBbUI7QUFBQTs7QUFBQSwyR0FDVEEsS0FEUztBQUVsQjs7QUFFRDs7Ozs7Ozs7NkNBSXFCO0FBQ2pCLGdCQUFJQyxJQUFJLElBQVI7QUFDQSxnQkFBSUMsYUFBYSxFQUFqQjtBQUNBLGdCQUFJQyxnQkFBZ0JDLE1BQU1DLFFBQU4sQ0FBZUMsS0FBZixDQUFxQkwsRUFBRUQsS0FBRixDQUFRTyxRQUE3QixDQUFwQjtBQUNBLGdCQUFJQyxrQkFBa0IsRUFBdEI7QUFDQSxnQkFBSUMsYUFBYSxDQUFqQjtBQUNBLG1CQUFPTixrQkFBa0IsQ0FBekIsRUFBNEI7QUFDeEJLLGdDQUFnQkUsSUFBaEIsQ0FBcUJELFlBQXJCO0FBQ0g7O0FBRUQsbUJBQU9ELGdCQUFnQkcsTUFBdkIsRUFBK0I7QUFDM0JULDJCQUFXUSxJQUFYLENBQWdCRixnQkFBZ0JJLE1BQWhCLENBQXVCLENBQXZCLEVBQTBCWCxFQUFFRCxLQUFGLENBQVFhLEdBQWxDLENBQWhCO0FBQ0g7O0FBRUQsbUJBQU9YLFVBQVA7QUFDSDs7O2lDQUVRO0FBQUE7O0FBQ0wsZ0JBQUlELElBQUksSUFBUjtBQUNBO0FBQ0EsZ0JBQUlNLFdBQVdILE1BQU1DLFFBQU4sQ0FBZVMsT0FBZixDQUF1QmIsRUFBRUQsS0FBRixDQUFRTyxRQUEvQixDQUFmOztBQUVBLGdCQUFJUSxPQUFPZCxFQUFFZSxrQkFBRixFQUFYO0FBTEssMkJBTWtDZixFQUFFRCxLQU5wQztBQUFBLGdCQU1BaUIsU0FOQSxZQU1BQSxTQU5BO0FBQUEsZ0JBTVdDLE1BTlgsWUFNV0EsTUFOWDs7QUFBQSxnQkFNc0JDLFFBTnRCOztBQVFMLG1CQUNJO0FBQUE7QUFBQSxrQkFBSyxXQUFXMUIsV0FBV0ssWUFBWSxNQUFaLENBQVgsa0RBQ1htQixTQURXLEVBQ0MsQ0FBQyxDQUFDQSxTQURILGdDQUVYbkIsWUFBWSxTQUFaLENBRlcsRUFFY29CLE1BRmQsZ0NBR1hwQixZQUFZLGdCQUFaLENBSFcsRUFHcUIsS0FBS0UsS0FBTCxDQUFXb0IsU0FIaEMsZ0JBQWhCO0FBTUlMLHFCQUFLTSxHQUFMLENBQVMsVUFBVUMsT0FBVixFQUFtQkMsQ0FBbkIsRUFBc0I7QUFDM0IsMkJBQ0k7QUFBQywyQkFBRDtBQUFBLHFDQUFTSixRQUFULElBQW1CLEtBQUtJLENBQXhCO0FBQ0tELGdDQUFRRCxHQUFSLENBQVksVUFBVUcsS0FBVixFQUFpQjtBQUMxQixtQ0FBT2pCLFNBQVNpQixLQUFULENBQVA7QUFDSCx5QkFGQTtBQURMLHFCQURKO0FBT0gsaUJBUkQ7QUFOSixhQURKO0FBbUJIOzs7O0VBdERjcEIsTUFBTXFCLFM7O0FBeUR6QjFCLEtBQUsyQixZQUFMLEdBQW9CO0FBQ2hCVCxlQUFXLEVBREs7QUFFaEJKLFNBQUssQ0FGVztBQUdoQmMsWUFBUSxLQUhRO0FBSWhCVCxZQUFRLEtBSlE7QUFLaEJVLGdCQUFZLFFBTEk7QUFNaEJDLGdCQUFZLFFBTkk7QUFPaEJULGVBQVc7QUFQSyxDQUFwQjs7QUFVQTtBQUNBckIsS0FBSytCLFNBQUwsR0FBaUI7QUFDYmIsZUFBV2IsTUFBTTJCLFNBQU4sQ0FBZ0JDLE1BRGQ7QUFFYjtBQUNBbkIsU0FBS1QsTUFBTTJCLFNBQU4sQ0FBZ0JFLE1BSFI7QUFJYjtBQUNBTixZQUFRdkIsTUFBTTJCLFNBQU4sQ0FBZ0JHLElBTFg7QUFNYjtBQUNBaEIsWUFBUWQsTUFBTTJCLFNBQU4sQ0FBZ0JHLElBUFg7QUFRYjtBQUNBTixnQkFBWWhDLEtBQUtrQyxTQUFMLENBQWVLLE1BVGQ7QUFVYjtBQUNBTixnQkFBWWpDLEtBQUtrQyxTQUFMLENBQWVNLE1BWGQ7QUFZYjtBQUNBaEIsZUFBV2hCLE1BQU0yQixTQUFOLENBQWdCRztBQWJkLENBQWpCOztBQWdCQW5DLEtBQUtzQyxXQUFMLEdBQW1CLE1BQW5COztBQUVBQyxPQUFPQyxPQUFQLEdBQWlCeEMsSUFBakIiLCJmaWxlIjoiR3JpZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuKiBDb2xsZWN0aW9uIENvbXBvbmVudCBmb3IgdGluZ2xlXG4qIEBhdXRob3IgZ25vc2FpalxuKlxuKiBDb3B5cmlnaHQgMjAxNC0yMDE2LCBUaW5nbGUgVGVhbSwgQWxpbncuXG4qIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4qL1xuY29uc3QgY2xhc3NuYW1lcyA9IHJlcXVpcmUoJ2NsYXNzbmFtZXMnKTtcbmNvbnN0IENvbnRleHQgPSByZXF1aXJlKCdAYWxpL3RpbmdsZS1jb250ZXh0Jyk7XG5jb25zdCB7VkJveH0gPSByZXF1aXJlKCdAYWxpL3RpbmdsZS1ib3gnKTtcbmNvbnN0IFJvdyA9IHJlcXVpcmUoJy4vUm93Jyk7XG5cbmNvbnN0IHByZWZpeENsYXNzID0gQ29udGV4dC5wcmVmaXhDbGFzcztcblxuY2xhc3MgR3JpZCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiDlsIblrZDlhYPntKDnmoTntKLlvJXlgLzmoLnmja7liJfmlbDliJLliIbmiJDnu4RcbiAgICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICAqL1xuICAgIGN1dEluZGV4ZXNJbnRvUm93cygpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICBsZXQgcm93SW5kZXhlcyA9IFtdO1xuICAgICAgICBsZXQgY2hpbGRyZW5Db3VudCA9IFJlYWN0LkNoaWxkcmVuLmNvdW50KHQucHJvcHMuY2hpbGRyZW4pO1xuICAgICAgICBsZXQgZHVtbXlJbmRleEFycmF5ID0gW107XG4gICAgICAgIGxldCBkdW1teUluZGV4ID0gMDtcbiAgICAgICAgd2hpbGUgKGNoaWxkcmVuQ291bnQtLSA+IDApIHtcbiAgICAgICAgICAgIGR1bW15SW5kZXhBcnJheS5wdXNoKGR1bW15SW5kZXgrKyk7XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAoZHVtbXlJbmRleEFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgICAgcm93SW5kZXhlcy5wdXNoKGR1bW15SW5kZXhBcnJheS5zcGxpY2UoMCwgdC5wcm9wcy5jb2wpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByb3dJbmRleGVzO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICAvLyByZWFjdDAuMTRcbiAgICAgICAgbGV0IGNoaWxkcmVuID0gUmVhY3QuQ2hpbGRyZW4udG9BcnJheSh0LnByb3BzLmNoaWxkcmVuKTtcblxuICAgICAgICBsZXQgcm93cyA9IHQuY3V0SW5kZXhlc0ludG9Sb3dzKCk7XG4gICAgICAgIGxldCB7Y2xhc3NOYW1lLCBub0xpbmUsIC4uLnJvd1Byb3BzfSA9IHQucHJvcHM7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc25hbWVzKHByZWZpeENsYXNzKCdncmlkJyksIHtcbiAgICAgICAgICAgICAgICBbY2xhc3NOYW1lXTogISFjbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgW3ByZWZpeENsYXNzKCduby1saW5lJyldOiBub0xpbmUsXG4gICAgICAgICAgICAgICAgW3ByZWZpeENsYXNzKCdncmlkLXRvdWNoYWJsZScpXTogdGhpcy5wcm9wcy50b3VjaGFibGVcbiAgICAgICAgICAgIH0pfT5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByb3dzLm1hcChmdW5jdGlvbiAoaW5kZXhlcywgaSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFJvdyB7Li4ucm93UHJvcHN9IGtleT17aX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2luZGV4ZXMubWFwKGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Sb3c+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuR3JpZC5kZWZhdWx0UHJvcHMgPSB7XG4gICAgY2xhc3NOYW1lOiAnJyxcbiAgICBjb2w6IDQsXG4gICAgc3F1YXJlOiBmYWxzZSxcbiAgICBub0xpbmU6IGZhbHNlLFxuICAgIGl0ZW1IQWxpZ246ICdjZW50ZXInLFxuICAgIGl0ZW1WQWxpZ246ICdjZW50ZXInLFxuICAgIHRvdWNoYWJsZTogZmFsc2Vcbn07XG5cbi8vIGh0dHA6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy9yZXVzYWJsZS1jb21wb25lbnRzLmh0bWxcbkdyaWQucHJvcFR5cGVzID0ge1xuICAgIGNsYXNzTmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICAvLyDliJfmlbBcbiAgICBjb2w6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIsXG4gICAgLy8g5piv5ZCm6Ieq6YCC5bqU5Y2V5YWD5qC855qE6auY5bqmIOS9v+WNleWFg+agvOaIkOS4uuato+aWueW9olxuICAgIHNxdWFyZTogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXG4gICAgLy8g5piv5ZCm6ZqQ6JeP5YiG5Ymy57q/XG4gICAgbm9MaW5lOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcbiAgICAvLyDljZXkuKrmoLzlrZDnmoTmsLTlubPlr7nlhbbmlrnlvI9cbiAgICBpdGVtSEFsaWduOiBWQm94LnByb3BUeXBlcy5oQWxpZ24sXG4gICAgLy8g5Y2V5Liq5qC85a2Q55qE5Z6C55u05a+55YW25pa55byPXG4gICAgaXRlbVZBbGlnbjogVkJveC5wcm9wVHlwZXMudkFsaWduLFxuICAgIC8vIOWNleWFg+agvOaYr+WQpuWPr+eCueWHu1xuICAgIHRvdWNoYWJsZTogUmVhY3QuUHJvcFR5cGVzLmJvb2xcbn07XG5cbkdyaWQuZGlzcGxheU5hbWUgPSAnR3JpZCc7XG5cbm1vZHVsZS5leHBvcnRzID0gR3JpZDtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
