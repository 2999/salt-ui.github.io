'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * CheckboxField Component for tingle
 * @author shanchao
 *
 * Copyright 2014-2016, Tingle Team.
 * All rights reserved.
 */
var React = require('react');
var classnames = require('classnames');
var Icon = require('@ali/tingle-icon');
var Context = require('@ali/tingle-context');
var Group = require('@ali/tingle-group');

var prefixClass = Context.prefixClass;

var CheckboxField = function (_React$Component) {
    _inherits(CheckboxField, _React$Component);

    function CheckboxField(props) {
        _classCallCheck(this, CheckboxField);

        return _possibleConstructorReturn(this, (CheckboxField.__proto__ || Object.getPrototypeOf(CheckboxField)).call(this, props));
    }

    _createClass(CheckboxField, [{
        key: 'clickAction',
        value: function clickAction(value, item, index, data) {
            var t = this;
            var onChange = t.props.onChange;

            var disable = item.disable;
            if (disable) {
                return;
            }
            item.checked = !item.checked;
            onChange && onChange(value, index, data);
            t.forceUpdate();
        }
    }, {
        key: 'render',
        value: function render() {
            var t = this;
            var props = t.props;
            var className = props.className;
            var checkboxArray = props.data;
            var groupListArgument = props.groupListArgument;
            var groupListFlag = props.groupListFlag;
            var label = props.label;

            var requiredTag = React.createElement(Icon, { name: 'field-required', className: prefixClass('field-layout-label-required'), width: 6, height: 6, fill: 'red' });

            var checkboxArrayComponent = checkboxArray.map(function (item, index, data) {
                var checked = item.checked;
                var disable = item.disable;
                var value = item.value;


                var iconName = checked ? "check-round" : "";
                var iconClassName = classnames(prefixClass("checkbox-field-icon"), { "checked": checked }, { "noChecked": !checked }, { "disable": disable });

                var textClassName = classnames(prefixClass("checkbox-field-text FBH FBAC"), { "disable": disable });

                var iconTag = checked ? React.createElement(Icon, { key: 'check-round', width: 22, height: 22, name: 'check-round', className: iconClassName }) : React.createElement('div', { className: iconClassName });

                var finalItemJSX = React.createElement(
                    'div',
                    { onClick: t.clickAction.bind(t, value, item, index, checkboxArray), key: index,
                        className: prefixClass("checkbox-field-row FBAC FBH") },
                    React.createElement(
                        'div',
                        { className: prefixClass("checkbox-field-icon-div FBH FBAC") },
                        iconTag
                    ),
                    React.createElement(
                        'div',
                        { ref: "text" + index, className: textClassName },
                        item.text
                    )
                );
                return finalItemJSX;
            });

            var finalJSX = React.createElement(
                Group,
                { className: classnames(prefixClass('checkbox-field'), _defineProperty({}, className, !!className)) },
                label == '' ? null : React.createElement(
                    Group.Head,
                    { className: classnames(prefixClass('checkbox-label')) },
                    label,
                    this.props.required && requiredTag
                ),
                React.createElement(
                    Group.List,
                    groupListArgument,
                    checkboxArrayComponent
                )
            );

            if (!groupListFlag) {
                finalJSX = React.createElement(
                    'div',
                    { ref: 'root', className: classnames(prefixClass('checkbox-field'), _defineProperty({}, className, !!className)) },
                    checkboxArrayComponent
                );
            }
            return finalJSX;
        }
    }, {
        key: 'getData',
        value: function getData() {
            var t = this;
            return t.props.data;
        }
    }]);

    return CheckboxField;
}(React.Component);

CheckboxField.defaultProps = {
    data: [],
    onChange: function onChange() {},
    groupListFlag: true,
    groupListArgument: {
        lineIndent: 0,
        itemIndent: 15
    },
    label: ''
};

// http://facebook.github.io/react/docs/reusable-components.html
CheckboxField.propTypes = {
    className: React.PropTypes.string,
    data: React.PropTypes.array,
    onChange: React.PropTypes.func,
    groupListFlag: React.PropTypes.bool,
    groupListArgument: React.PropTypes.object
};

CheckboxField.displayName = 'CheckboxField';

module.exports = CheckboxField;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNoZWNrYm94RmllbGQuanMiXSwibmFtZXMiOlsiUmVhY3QiLCJyZXF1aXJlIiwiY2xhc3NuYW1lcyIsIkljb24iLCJDb250ZXh0IiwiR3JvdXAiLCJwcmVmaXhDbGFzcyIsIkNoZWNrYm94RmllbGQiLCJwcm9wcyIsInZhbHVlIiwiaXRlbSIsImluZGV4IiwiZGF0YSIsInQiLCJvbkNoYW5nZSIsImRpc2FibGUiLCJjaGVja2VkIiwiZm9yY2VVcGRhdGUiLCJjbGFzc05hbWUiLCJjaGVja2JveEFycmF5IiwiZ3JvdXBMaXN0QXJndW1lbnQiLCJncm91cExpc3RGbGFnIiwibGFiZWwiLCJyZXF1aXJlZFRhZyIsImNoZWNrYm94QXJyYXlDb21wb25lbnQiLCJtYXAiLCJpY29uTmFtZSIsImljb25DbGFzc05hbWUiLCJ0ZXh0Q2xhc3NOYW1lIiwiaWNvblRhZyIsImZpbmFsSXRlbUpTWCIsImNsaWNrQWN0aW9uIiwiYmluZCIsInRleHQiLCJmaW5hbEpTWCIsInJlcXVpcmVkIiwiQ29tcG9uZW50IiwiZGVmYXVsdFByb3BzIiwibGluZUluZGVudCIsIml0ZW1JbmRlbnQiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJzdHJpbmciLCJhcnJheSIsImZ1bmMiLCJib29sIiwib2JqZWN0IiwiZGlzcGxheU5hbWUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7OztBQU9BLElBQU1BLFFBQVFDLFFBQVEsT0FBUixDQUFkO0FBQ0EsSUFBTUMsYUFBYUQsUUFBUSxZQUFSLENBQW5CO0FBQ0EsSUFBTUUsT0FBT0YsUUFBUSxrQkFBUixDQUFiO0FBQ0EsSUFBTUcsVUFBVUgsUUFBUSxxQkFBUixDQUFoQjtBQUNBLElBQU1JLFFBQVFKLFFBQVEsbUJBQVIsQ0FBZDs7QUFFQSxJQUFJSyxjQUFjRixRQUFRRSxXQUExQjs7SUFDTUMsYTs7O0FBRUYsMkJBQVlDLEtBQVosRUFBbUI7QUFBQTs7QUFBQSw2SEFDVEEsS0FEUztB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QU15QyxTQUFOLENBQWdCSztBQUxiLENBQTFCOztBQVFBdkMsY0FBY3dDLFdBQWQsR0FBNEIsZUFBNUI7O0FBRUFDLE9BQU9DLE9BQVAsR0FBaUIxQyxhQUFqQiIsImZpbGUiOiJDaGVja2JveEZpZWxkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDaGVja2JveEZpZWxkIENvbXBvbmVudCBmb3IgdGluZ2xlXG4gKiBAYXV0aG9yIHNoYW5jaGFvXG4gKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNiwgVGluZ2xlIFRlYW0uXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5jb25zdCBjbGFzc25hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xuY29uc3QgSWNvbiA9IHJlcXVpcmUoJ0BhbGkvdGluZ2xlLWljb24nKTtcbmNvbnN0IENvbnRleHQgPSByZXF1aXJlKCdAYWxpL3RpbmdsZS1jb250ZXh0Jyk7XG5jb25zdCBHcm91cCA9IHJlcXVpcmUoJ0BhbGkvdGluZ2xlLWdyb3VwJyk7XG5cbmxldCBwcmVmaXhDbGFzcyA9IENvbnRleHQucHJlZml4Q2xhc3M7XG5jbGFzcyBDaGVja2JveEZpZWxkIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICB9XG5cbiAgICBjbGlja0FjdGlvbih2YWx1ZSwgaXRlbSwgaW5kZXgsIGRhdGEpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICBsZXQge29uQ2hhbmdlfSA9IHQucHJvcHM7XG4gICAgICAgIGxldCBkaXNhYmxlID0gaXRlbS5kaXNhYmxlO1xuICAgICAgICBpZiAoZGlzYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGl0ZW0uY2hlY2tlZCA9ICFpdGVtLmNoZWNrZWQ7XG4gICAgICAgIG9uQ2hhbmdlICYmIG9uQ2hhbmdlKHZhbHVlLCBpbmRleCwgZGF0YSk7XG4gICAgICAgIHQuZm9yY2VVcGRhdGUoKTtcblxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICBsZXQgcHJvcHMgPSB0LnByb3BzO1xuICAgICAgICBsZXQge2NsYXNzTmFtZSwgZGF0YTpjaGVja2JveEFycmF5LCBncm91cExpc3RBcmd1bWVudCwgZ3JvdXBMaXN0RmxhZywgbGFiZWx9ID0gcHJvcHM7XG4gICAgICAgIGNvbnN0IHJlcXVpcmVkVGFnID0gKFxuICAgICAgICAgICAgPEljb24gbmFtZT1cImZpZWxkLXJlcXVpcmVkXCIgY2xhc3NOYW1lPXtwcmVmaXhDbGFzcygnZmllbGQtbGF5b3V0LWxhYmVsLXJlcXVpcmVkJyl9IHdpZHRoPXs2fSBoZWlnaHQ9ezZ9IGZpbGw9XCJyZWRcIiAvPlxuICAgICAgICApO1xuXG4gICAgICAgIGxldCBjaGVja2JveEFycmF5Q29tcG9uZW50ID0gY2hlY2tib3hBcnJheS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4LCBkYXRhKSB7XG5cbiAgICAgICAgICAgIGxldCB7Y2hlY2tlZCxkaXNhYmxlLCB2YWx1ZX0gPSBpdGVtO1xuICAgXG4gICAgICAgICAgICBsZXQgaWNvbk5hbWUgPSBjaGVja2VkID8gXCJjaGVjay1yb3VuZFwiIDogXCJcIjtcbiAgICAgICAgICAgIGxldCBpY29uQ2xhc3NOYW1lID0gY2xhc3NuYW1lcyhwcmVmaXhDbGFzcyhcImNoZWNrYm94LWZpZWxkLWljb25cIiksIHtcImNoZWNrZWRcIjogY2hlY2tlZH0sIHtcIm5vQ2hlY2tlZFwiOiAhY2hlY2tlZH0sIHtcImRpc2FibGVcIjogZGlzYWJsZX0pO1xuXG4gICAgICAgICAgICBsZXQgdGV4dENsYXNzTmFtZSA9IGNsYXNzbmFtZXMocHJlZml4Q2xhc3MoXCJjaGVja2JveC1maWVsZC10ZXh0IEZCSCBGQkFDXCIpLCB7XCJkaXNhYmxlXCI6IGRpc2FibGV9KTtcblxuICAgICAgICAgICAgbGV0IGljb25UYWcgPSBjaGVja2VkIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IDxJY29uIGtleT1cImNoZWNrLXJvdW5kXCIgd2lkdGg9ezIyfSBoZWlnaHQ9ezIyfSBuYW1lPVwiY2hlY2stcm91bmRcIiBjbGFzc05hbWU9e2ljb25DbGFzc05hbWV9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiA8ZGl2IGNsYXNzTmFtZT17aWNvbkNsYXNzTmFtZX0+PC9kaXY+IDtcblxuICAgICAgICAgICAgbGV0IGZpbmFsSXRlbUpTWCA9IChcblxuICAgICAgICAgICAgICAgIDxkaXYgb25DbGljaz17dC5jbGlja0FjdGlvbi5iaW5kKHQsIHZhbHVlLCBpdGVtLGluZGV4LCBjaGVja2JveEFycmF5KX0ga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17cHJlZml4Q2xhc3MoXCJjaGVja2JveC1maWVsZC1yb3cgRkJBQyBGQkhcIil9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17cHJlZml4Q2xhc3MoXCJjaGVja2JveC1maWVsZC1pY29uLWRpdiBGQkggRkJBQ1wiKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7aWNvblRhZ31cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPXtcInRleHRcIiArIGluZGV4fSBjbGFzc05hbWU9e3RleHRDbGFzc05hbWV9PntpdGVtLnRleHR9PC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIGZpbmFsSXRlbUpTWFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBsZXQgZmluYWxKU1ggPSAoXG4gICAgICAgICAgICA8R3JvdXAgY2xhc3NOYW1lPXtjbGFzc25hbWVzKHByZWZpeENsYXNzKCdjaGVja2JveC1maWVsZCcpLCB7XG4gICAgICAgICAgICAgICAgW2NsYXNzTmFtZV06ICEhY2xhc3NOYW1lXG4gICAgICAgICAgICB9KX0+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbCA9PSAnJ1xuICAgICAgICAgICAgICAgICAgICA/IG51bGwgXG4gICAgICAgICAgICAgICAgICAgIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgIDxHcm91cC5IZWFkIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhwcmVmaXhDbGFzcygnY2hlY2tib3gtbGFiZWwnKSl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgIHtsYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5yZXF1aXJlZCAmJiByZXF1aXJlZFRhZ31cbiAgICAgICAgICAgICAgICAgICAgICAgICA8L0dyb3VwLkhlYWQ+XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPEdyb3VwLkxpc3Qgey4uLmdyb3VwTGlzdEFyZ3VtZW50fSA+XG4gICAgICAgICAgICAgICAgICAgIHtjaGVja2JveEFycmF5Q29tcG9uZW50fVxuICAgICAgICAgICAgICAgIDwvR3JvdXAuTGlzdD5cbiAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKCFncm91cExpc3RGbGFnKSB7XG4gICAgICAgICAgICBmaW5hbEpTWCA9IChcbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj0ncm9vdCcgY2xhc3NOYW1lPXtjbGFzc25hbWVzKHByZWZpeENsYXNzKCdjaGVja2JveC1maWVsZCcpLCB7XG4gICAgICAgICAgICAgICAgICAgIFtjbGFzc05hbWVdOiAhIWNsYXNzTmFtZVxuICAgICAgICAgICAgICAgIH0pfT5cbiAgICAgICAgICAgICAgICAgICAge2NoZWNrYm94QXJyYXlDb21wb25lbnR9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbmFsSlNYO1xuICAgIH1cblxuICAgIGdldERhdGEoKXtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdC5wcm9wcy5kYXRhO1xuICAgIH1cbn1cblxuQ2hlY2tib3hGaWVsZC5kZWZhdWx0UHJvcHMgPSB7XG4gICAgZGF0YTogW10sXG4gICAgb25DaGFuZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICB9LFxuICAgIGdyb3VwTGlzdEZsYWc6IHRydWUsXG4gICAgZ3JvdXBMaXN0QXJndW1lbnQ6IHtcbiAgICAgICAgbGluZUluZGVudDogMCxcbiAgICAgICAgaXRlbUluZGVudDogMTVcbiAgICB9LFxuICAgIGxhYmVsOicnXG59O1xuXG4vLyBodHRwOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvcmV1c2FibGUtY29tcG9uZW50cy5odG1sXG5DaGVja2JveEZpZWxkLnByb3BUeXBlcyA9IHtcbiAgICBjbGFzc05hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgZGF0YTogUmVhY3QuUHJvcFR5cGVzLmFycmF5LFxuICAgIG9uQ2hhbmdlOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcbiAgICBncm91cExpc3RGbGFnOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcbiAgICBncm91cExpc3RBcmd1bWVudDogUmVhY3QuUHJvcFR5cGVzLm9iamVjdFxufTtcblxuQ2hlY2tib3hGaWVsZC5kaXNwbGF5TmFtZSA9ICdDaGVja2JveEZpZWxkJztcblxubW9kdWxlLmV4cG9ydHMgPSBDaGVja2JveEZpZWxkO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
