'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var classnames = require('classnames');
var i18n = require('../i18n');
var Context = require('@ali/tingle-context');
var prefixClass = Context.prefixClass;

// value 的格式：{startDate: '2016-01-02', startDateType: 'AM', endDate: '2016-01-03', endDateType: 'AM' }

var Day = function (_React$Component) {
  _inherits(Day, _React$Component);

  function Day(props) {
    _classCallCheck(this, Day);

    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Day).call(this, props));

    _this.state = {
      currentDate: _this.processValue(props).startDate, // 当前正在展示的面板上对应的时间，用以获取年和月的信息
      active: 'endDate'
    };
    return _this;
  }

  _createClass(Day, [{
    key: 'componentWillMount',
    value: function componentWillMount() {
      var t = this;
      t.locale = i18n[t.props.locale];
    }
  }, {
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      var t = this;
      var value = t.props.value;

      var nextValue = nextProps.value;
      var active = t.state.active;

      var newState = {};
      if (new Date(value.startDate).getTime() !== new Date(nextValue.startDate).getTime()) {
        newState['active'] = 'startDate';
      } else {
        newState['active'] = 'endDate';
      }
      if (t.processValue().startDate.getTime() !== t.processValue(nextProps).startDate.getTime()) {
        newState['currentDate'] = t.processValue(nextProps).startDate;
      }

      t.setState(newState);
    }
  }, {
    key: 'processValue',
    value: function processValue(props) {
      var t = this;
      props = props || t.props;
      if (_typeof(props.value) == 'object') {
        var _props$value = props.value;
        var startDate = _props$value.startDate;
        var startDateType = _props$value.startDateType;
        var endDate = _props$value.endDate;
        var endDateType = _props$value.endDateType;
      } else {
        var startDate = props.value;
      }

      // 处理异常情况，当 endDate 存在且不等于 startDate 的情况下， startDateType 不可能为 'AM'
      if (endDate && new Date(startDate).getTime() !== new Date(endDate).getTime() && startDateType == 'AM') {
        startDateType = 'FULL';
      }
      return {
        startDate: new Date(startDate || 0),
        startDateType: startDateType || 'FULL',
        endDate: new Date(endDate || startDate || 0),
        endDateType: endDateType || 'FULL'
      };
    }
  }, {
    key: 'handlePrev',
    value: function handlePrev() {
      var t = this;
      var currentDate = t.state.currentDate;

      t.setState({
        currentDate: new Date(currentDate.setMonth(currentDate.getMonth() - 1))
      });
    }
  }, {
    key: 'handleNext',
    value: function handleNext() {
      var t = this;
      var currentDate = t.state.currentDate;

      t.setState({
        currentDate: new Date(currentDate.setMonth(currentDate.getMonth() + 1))
      });
    }
  }, {
    key: 'handleClick',
    value: function handleClick(date, e) {
      var t = this;

      //如果有onSelecting的方法，且其执行函数后值为false，则直接返回
      if (typeof t.props.onSelecting == 'function' && t.props.onSelecting(date, e) === false) {
        return;
      }

      var singleMode = t.props.singleMode;
      var _t$props$value = t.props.value;
      var startDate = _t$props$value.startDate;
      var startDateType = _t$props$value.startDateType;
      var endDate = _t$props$value.endDate;
      var endDateType = _t$props$value.endDateType;

      var status = 0;
      // 先判断目前是一点状态还是两点状态，如果 startDate != endDate 则为两点状态，
      // 否则相等则为一点、startDate 为 0 则为0点状态
      if (!!startDate) {
        // 如果是单选模式，则 status 总为 2
        if (!!endDate && new Date(endDate).getTime() !== new Date(startDate).getTime() || singleMode) {
          status = 2;
        } else {
          status = 1;
        }
      }

      var newStartDate = '';
      var newEndDate = '';
      var newStartDateType = 'FULL';
      var newEndDateType = 'FULL';
      if (status == 0) {
        newStartDate = date.getTime();
      } else if (status == 1) {
        // 判断点击的时间和开始时间的大小，以决定谁是新的开始时间。
        if (date.getTime() >= new Date(startDate).getTime()) {
          newStartDate = startDate;
          newEndDate = date.getTime();
          newStartDateType = startDateType;
        } else {
          newStartDate = date.getTime();
          newEndDate = startDate;
          newEndDateType = startDateType;
        }
      } else {
        newStartDate = date.getTime();
      }

      t.props.onChange({
        startDate: newStartDate,
        startDateType: newStartDateType,
        endDate: newEndDate,
        endDateType: newEndDateType
      });
    }
  }, {
    key: 'handleTypeClick',
    value: function handleTypeClick(type, e) {
      var t = this;
      var value = typeof t.props.value == "string" ? { startDate: t.props.value } : t.props.value;
      var startDate = value.startDate;
      var startDateType = value.startDateType;
      var endDate = value.endDate;
      var endDateType = value.endDateType;

      var status = 0;
      var active = t.state.active;
      // 先判断目前是一点状态还是两点状态，如果 startDate != endDate 则为两点状态，
      // 否则相等则为一点、startDate 不存在则为 0 点状态

      if (!!startDate) {
        if (!!endDate && new Date(endDate).getTime() !== new Date(startDate).getTime()) {
          status = 2;
        } else {
          status = 1;
        }
      }

      var newStartDateType = "FULL";
      var newEndDateType = "FULL";

      if (status == 2) {
        if (active == 'startDate') {
          newStartDateType = type;
          newEndDateType = endDateType;
        } else {
          newStartDateType = startDateType;
          newEndDateType = type;
        }
      } else {
        newStartDateType = type;
        newEndDateType = type;
      }

      t.props.onChange({
        startDate: startDate,
        startDateType: newStartDateType,
        endDate: endDate,
        endDateType: newEndDateType
      });
    }
  }, {
    key: 'handleTitleClick',
    value: function handleTitleClick(e) {
      if (this.props.singleMode) {
        this.props.onTitleClick(e);
      }
    }

    /**
     * 当前时间是否在被选中的范围
     * @param {Date} date 当前时间
     * @param {Object} 由 processValue 导出的时间范围
     */

  }, {
    key: 'isInRange',
    value: function isInRange(date, value) {

      return date.getTime() >= value.startDate.getTime() && date.getTime() <= value.endDate.getTime();
    }
  }, {
    key: 'getType',
    value: function getType(date, value) {
      var type = '';
      ['FULL', 'AM', 'PM'].forEach(function (item, index) {
        if (date.getTime() == value.startDate.getTime() && new RegExp(item, 'i').test(value.startDateType) || date.getTime() == value.endDate.getTime() && new RegExp(item, 'i').test(value.endDateType)) {
          type = item;
        }
      });
      return type;
    }
  }, {
    key: 'renderDate',
    value: function renderDate(date, value) {
      var _classnames;

      var t = this;
      // TODO: tStatus 假休班
      // 只有开始和结束的日子可能出现上午和下午
      var type = t.getType(date, value);
      var now = new Date();
      var currentDate = t.state.currentDate;
      var cls = classnames((_classnames = {}, _defineProperty(_classnames, prefixClass('FB1 tap op'), true), _defineProperty(_classnames, prefixClass('now'), now.getTime() == date.getTime()), _defineProperty(_classnames, prefixClass('selected'), t.isInRange(date, value)), _defineProperty(_classnames, prefixClass('AM'), type == 'AM'), _defineProperty(_classnames, prefixClass('PM'), type == 'PM'), _defineProperty(_classnames, prefixClass('prev-month'), date.getMonth() < currentDate.getMonth() && date.getYear() === currentDate.getYear() || date.getYear() < currentDate.getYear()), _defineProperty(_classnames, prefixClass('next-month'), date.getMonth() > currentDate.getMonth() && date.getYear() === currentDate.getYear() || date.getYear() > currentDate.getYear()), _defineProperty(_classnames, prefixClass('weekend'), date.getDay() === 6 || date.getDay() === 0), _defineProperty(_classnames, t.handleExtraClass(date, value), true), _classnames));
      //在这里添加新功能，确定不可用日期
      var dateContent = React.createElement(
        'div',
        { key: date.getTime(), className: cls, onClick: t.handleClick.bind(t, new Date(date)) },
        React.createElement(
          'div',
          { className: prefixClass('date-point') },
          date.getDate()
        ),
        t.props.showHalfDay ? React.createElement(
          'div',
          { className: classnames(_defineProperty({}, prefixClass('date-tip'), true)) },
          t.props.showHalfDay ? t.locale['dayTipMap'][type] : ""
        ) : ''
      );
      return dateContent;
    }

    //给“天”的展示项目添加新的样式

  }, {
    key: 'handleExtraClass',
    value: function handleExtraClass(date, value) {
      //如果添加的是一个字符串
      if (typeof this.props.extraClass == 'string') {
        return this.props.extraClass;
      } else if (typeof this.props.extraClass == 'function') {
        return this.props.extraClass(date, value) || '';
      }
      return '';
    }
  }, {
    key: 'renderDatePanel',
    value: function renderDatePanel(value) {
      var t = this;
      var dateArrInAWeek = [];
      var weekArr = [];
      var flexBoxKey = 0;
      var currentDate = t.state.currentDate;

      var currentYear = currentDate.getFullYear();
      var currentMonth = currentDate.getMonth();
      var calendarCode = t.props.calendarCode;

      var now = new Date();
      var firstDateInStartMonth = new Date(new Date(currentDate).setDate(1));
      var changedDate = new Date(new Date(currentDate).setDate(1)); // 用于当月的循环复制
      var firstDayInStartMonth = firstDateInStartMonth.getDay();
      var firstDateShownInPanel = new Date(firstDateInStartMonth.setDate(firstDateInStartMonth.getDate() - firstDayInStartMonth));

      //计算上个月剩余补充天数
      for (var i = 0; i < firstDayInStartMonth; i++) {
        var _changedDate = new Date(firstDateShownInPanel);
        var date = new Date(_changedDate.setDate(_changedDate.getDate() + i));
        dateArrInAWeek.push(t.renderDate(date, value));
      }

      // 计算当前月天数

      while (changedDate.getMonth() == currentMonth) {
        flexBoxKey++;
        // 判断 dateArrInAWeek 数组是否已满 7 个，若满则推入 weekArr 数组
        if (dateArrInAWeek.length == 7) {
          weekArr.push(React.createElement(
            'div',
            { key: currentMonth + flexBoxKey, className: prefixClass('FBH') },
            dateArrInAWeek
          ));
          dateArrInAWeek = [];
        }
        dateArrInAWeek.push(t.renderDate(new Date(changedDate), value));
        changedDate.setDate(changedDate.getDate() + 1);
      }

      // 计算下个月剩余补充天数，如果下个月第一天恰好是周日，那么就没有必要渲染下个月了
      // 把最后一个 dateArrInAWeek 数组推进 weekArr 数组
      if (changedDate.getDay() == 0) {
        weekArr.push(React.createElement(
          'div',
          { key: "last", className: prefixClass('FBH') },
          dateArrInAWeek
        ));
      } else {
        var delta = 7 - changedDate.getDay();
        for (var _i = 0; _i < delta; _i++) {
          dateArrInAWeek.push(t.renderDate(new Date(changedDate), value));
          changedDate.setDate(changedDate.getDate() + 1);
        }
        weekArr.push(React.createElement(
          'div',
          { key: "last", className: prefixClass('FBH') },
          dateArrInAWeek
        ));
      }

      return weekArr;
    }
  }, {
    key: 'renderHalfDayButton',
    value: function renderHalfDayButton(date, value) {
      if (!this.props.showHalfDay) return;

      var t = this;
      var active = t.state.active;

      var type = t.getType(date, value);
      var am = React.createElement(
        'div',
        { key: 'tMorning', className: prefixClass("day morning tap op ") + (type == 'AM' ? 'now' : ''),
          onClick: t.handleTypeClick.bind(t, 'AM') },
        React.createElement(
          'span',
          null,
          t.locale['dayTipMap']['AM']
        )
      );
      var pm = React.createElement(
        'div',
        { key: 'tAfternoon', className: prefixClass("day afternoon tap op ") + (type == 'PM' ? 'now' : ''),
          onClick: t.handleTypeClick.bind(t, 'PM') },
        React.createElement(
          'span',
          null,
          t.locale['dayTipMap']['PM']
        )
      );
      var full = React.createElement(
        'div',
        { key: 'tFullDay', className: prefixClass("day fullday tap op ") + (type == 'FULL' ? 'now' : ''),
          onClick: t.handleTypeClick.bind(t, 'FULL') },
        React.createElement(
          'span',
          null,
          t.locale['dayTipMap']['FULL']
        )
      );

      // 处理被选中的日期，需判断当前是起点还是终点，若 开始时间 == 结束时间 则是起点

      //是否显示上午、下午
      if (value.startDate.getTime() === value.endDate.getTime()) {
        return [full, am, pm];
      } else {
        if (active == 'endDate') {
          return [full, am];
        } else {
          return [full, pm];
        }
      }
    }
  }, {
    key: 'renderTitle',
    value: function renderTitle(value) {
      var t = this;
      var currentDate = t.state.currentDate;

      var str = '';
      switch (t.props.locale) {
        case 'zh-cn':
          str = currentDate.getFullYear() + '年' + (currentDate.getMonth() + 1) + '月';
          break;
        case 'en':
          str = t.locale['monthTitle'][currentDate.getMonth()] + ' ' + currentDate.getFullYear();
          break;
      }
      return str;
    }
  }, {
    key: 'renderHalfDay',
    value: function renderHalfDay() {
      var _classnames4;

      var t = this;
      var value = t.processValue();
      var active = t.state.active;

      var left = t.renderHalfDayButton(value[active], value);
      var selected = value[active].getDate();
      return React.createElement(
        'div',
        { className: classnames(_defineProperty({}, prefixClass("half-wrap FBH FBAC"), true)) },
        React.createElement(
          'div',
          { className: classnames((_classnames4 = {}, _defineProperty(_classnames4, prefixClass("selected-day"), true), _defineProperty(_classnames4, prefixClass("DN"), !t.props.showHalfDay), _classnames4)) },
          selected
        ),
        left,
        React.createElement('div', { className: prefixClass("FB1") })
      );
    }
  }, {
    key: 'render',
    value: function render() {
      var t = this;
      var value = t.processValue();
      var clearButton = '';
      var ret = '';
      var _t$props = t.props;
      var show = _t$props.show;
      var className = _t$props.className;
      var singleMode = _t$props.singleMode;
      var showHalfDay = _t$props.showHalfDay;


      if (show) {
        ret = this.renderDatePanel(value);
      }

      return React.createElement(
        'div',
        { className: prefixClass('month-panel') },
        React.createElement(
          'div',
          { className: prefixClass('tool FBH FBAC') },
          React.createElement('div', { className: prefixClass('FB1') }),
          React.createElement(
            'div',
            { className: prefixClass('btn prev-month tap op'), onClick: t.handlePrev.bind(t) },
            '<'
          ),
          React.createElement(
            'span',
            { className: prefixClass('text'), onClick: t.handleTitleClick.bind(t) },
            this.renderTitle(value)
          ),
          React.createElement(
            'div',
            { className: prefixClass('btn next-month tap op'), onClick: t.handleNext.bind(t) },
            '>'
          ),
          React.createElement('div', { className: prefixClass('FB1') })
        ),
        React.createElement(
          'div',
          { className: prefixClass('week FBH') },
          t.locale['weekTitle'].map(function (item, index) {
            return React.createElement(
              'div',
              { className: prefixClass('FB1 FBAC'), key: index },
              item
            );
          })
        ),
        React.createElement(
          'div',
          { className: prefixClass('month') },
          ret
        ),
        t.props.showHalfDay && t.renderHalfDay()
      );
    }
  }]);

  return Day;
}(React.Component);

Day.propTypes = {
  show: React.PropTypes.bool, // 是否显示
  singleMode: React.PropTypes.bool, // 是否是单选模式
  showHalfDay: React.PropTypes.bool, // 是否显示半天
  calendarCode: React.PropTypes.object, // 后端传来的 code
  value: React.PropTypes.oneOfType([// 默认值
  React.PropTypes.string, React.PropTypes.object]),
  extraClass: React.PropTypes.oneOfType([// 默认值
  React.PropTypes.string, React.PropTypes.func]),
  onSelecting: React.PropTypes.func, //当某一天被点击是触发事件，如果其值为false则不执行
  locale: React.PropTypes.string, // 国际化语言
  onChange: React.PropTypes.func, // value 变化时触发的回调
  onTitleClick: React.PropTypes.func // 点击标题时触发的回调，用于切换面板
};

Day.defaultProps = {
  show: true,
  singleMode: true,
  showHalfDay: true,
  locale: 'zh-cn',
  calendarCode: {},
  onChange: function onChange() {},
  onSelecting: function onSelecting() {},
  onTitleClick: function onTitleClick() {},
  extraClass: ''
};

Day.displayName = "Day";

module.exports = Day;
//# sourceMappingURL=data:application/json;base64,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QUVqQixjQUFZLElBRks7QUFHakIsZUFBYSxJQUhJO0FBSWpCLFVBQVEsT0FKUztBQUtqQixnQkFBYyxFQUxHO0FBTWpCLFlBQVUsb0JBQU0sQ0FBRSxDQU5EO0FBT2pCLGVBQWEsdUJBQU0sQ0FBRSxDQVBKO0FBUWpCLGdCQUFjLHdCQUFNLENBQUUsQ0FSTDtBQVNqQixjQUFZO0FBVEssQ0FBbkI7O0FBWUEsSUFBSSxXQUFKLEdBQWtCLEtBQWxCOztBQUVBLE9BQU8sT0FBUCxHQUFpQixHQUFqQiIsImZpbGUiOiJsaWIvRGF5LmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IGNsYXNzbmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XG5sZXQgaTE4biA9IHJlcXVpcmUoJy4uL2kxOG4nKTtcbmxldCBDb250ZXh0ID0gcmVxdWlyZSgnQGFsaS90aW5nbGUtY29udGV4dCcpO1xubGV0IHByZWZpeENsYXNzID0gQ29udGV4dC5wcmVmaXhDbGFzcztcblxuLy8gdmFsdWUg55qE5qC85byP77yae3N0YXJ0RGF0ZTogJzIwMTYtMDEtMDInLCBzdGFydERhdGVUeXBlOiAnQU0nLCBlbmREYXRlOiAnMjAxNi0wMS0wMycsIGVuZERhdGVUeXBlOiAnQU0nIH1cbmNsYXNzIERheSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBjdXJyZW50RGF0ZTogdGhpcy5wcm9jZXNzVmFsdWUocHJvcHMpLnN0YXJ0RGF0ZSwgLy8g5b2T5YmN5q2j5Zyo5bGV56S655qE6Z2i5p2/5LiK5a+55bqU55qE5pe26Ze077yM55So5Lul6I635Y+W5bm05ZKM5pyI55qE5L+h5oGvXG4gICAgICBhY3RpdmU6ICdlbmREYXRlJ1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICBsZXQgdCA9IHRoaXM7XG4gICAgdC5sb2NhbGUgPSBpMThuW3QucHJvcHMubG9jYWxlXTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgbGV0IHQgPSB0aGlzO1xuICAgIGxldCB7dmFsdWV9ID0gdC5wcm9wcztcbiAgICBsZXQgbmV4dFZhbHVlID0gbmV4dFByb3BzLnZhbHVlO1xuICAgIGxldCB7YWN0aXZlfSA9IHQuc3RhdGU7XG4gICAgbGV0IG5ld1N0YXRlID0ge307XG4gICAgaWYgKG5ldyBEYXRlKHZhbHVlLnN0YXJ0RGF0ZSkuZ2V0VGltZSgpICE9PSBuZXcgRGF0ZShuZXh0VmFsdWUuc3RhcnREYXRlKS5nZXRUaW1lKCkpIHtcbiAgICAgIG5ld1N0YXRlWydhY3RpdmUnXSA9ICdzdGFydERhdGUnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIG5ld1N0YXRlWydhY3RpdmUnXSA9ICdlbmREYXRlJztcbiAgICB9XG4gICAgaWYgKHQucHJvY2Vzc1ZhbHVlKCkuc3RhcnREYXRlLmdldFRpbWUoKSAhPT0gdC5wcm9jZXNzVmFsdWUobmV4dFByb3BzKS5zdGFydERhdGUuZ2V0VGltZSgpKSB7XG4gICAgICBuZXdTdGF0ZVsnY3VycmVudERhdGUnXSA9IHQucHJvY2Vzc1ZhbHVlKG5leHRQcm9wcykuc3RhcnREYXRlO1xuICAgIH1cblxuICAgIHQuc2V0U3RhdGUobmV3U3RhdGUpO1xuICB9XG5cbiAgcHJvY2Vzc1ZhbHVlKHByb3BzKSB7XG4gICAgbGV0IHQgPSB0aGlzO1xuICAgIHByb3BzID0gcHJvcHMgfHwgdC5wcm9wcztcbiAgICBpZiAodHlwZW9mIHByb3BzLnZhbHVlID09ICdvYmplY3QnKSB7XG4gICAgICB2YXIge3N0YXJ0RGF0ZSwgc3RhcnREYXRlVHlwZSwgZW5kRGF0ZSwgZW5kRGF0ZVR5cGV9ID0gcHJvcHMudmFsdWU7XG4gICAgfVxuXG4gICAgZWxzZSB7XG4gICAgICB2YXIgc3RhcnREYXRlID0gcHJvcHMudmFsdWU7XG4gICAgfVxuXG4gICAgLy8g5aSE55CG5byC5bi45oOF5Ya177yM5b2TIGVuZERhdGUg5a2Y5Zyo5LiU5LiN562J5LqOIHN0YXJ0RGF0ZSDnmoTmg4XlhrXkuIvvvIwgc3RhcnREYXRlVHlwZSDkuI3lj6/og73kuLogJ0FNJ1xuICAgIGlmIChlbmREYXRlICYmIG5ldyBEYXRlKHN0YXJ0RGF0ZSkuZ2V0VGltZSgpICE9PSBuZXcgRGF0ZShlbmREYXRlKS5nZXRUaW1lKCkgJiYgc3RhcnREYXRlVHlwZSA9PSAnQU0nKSB7XG4gICAgICBzdGFydERhdGVUeXBlID0gJ0ZVTEwnO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnREYXRlOiBuZXcgRGF0ZShzdGFydERhdGUgfHwgMCksXG4gICAgICBzdGFydERhdGVUeXBlOiBzdGFydERhdGVUeXBlIHx8ICdGVUxMJyxcbiAgICAgIGVuZERhdGU6IG5ldyBEYXRlKGVuZERhdGUgfHwgc3RhcnREYXRlIHx8IDApLFxuICAgICAgZW5kRGF0ZVR5cGU6IGVuZERhdGVUeXBlIHx8ICdGVUxMJ1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVByZXYoKSB7XG4gICAgbGV0IHQgPSB0aGlzO1xuICAgIGxldCB7Y3VycmVudERhdGV9ID0gdC5zdGF0ZTtcbiAgICB0LnNldFN0YXRlKHtcbiAgICAgIGN1cnJlbnREYXRlOiBuZXcgRGF0ZShjdXJyZW50RGF0ZS5zZXRNb250aChjdXJyZW50RGF0ZS5nZXRNb250aCgpIC0gMSkpXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZU5leHQoKSB7XG4gICAgbGV0IHQgPSB0aGlzO1xuICAgIGxldCB7Y3VycmVudERhdGV9ID0gdC5zdGF0ZTtcbiAgICB0LnNldFN0YXRlKHtcbiAgICAgIGN1cnJlbnREYXRlOiBuZXcgRGF0ZShjdXJyZW50RGF0ZS5zZXRNb250aChjdXJyZW50RGF0ZS5nZXRNb250aCgpICsgMSkpXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKGRhdGUsIGUpIHtcbiAgICBsZXQgdCA9IHRoaXM7XG4gICAgXG4gICAgLy/lpoLmnpzmnIlvblNlbGVjdGluZ+eahOaWueazle+8jOS4lOWFtuaJp+ihjOWHveaVsOWQjuWAvOS4umZhbHNl77yM5YiZ55u05o6l6L+U5ZueXG4gICAgaWYodHlwZW9mIHQucHJvcHMub25TZWxlY3RpbmcgPT0gJ2Z1bmN0aW9uJyAmJiB0LnByb3BzLm9uU2VsZWN0aW5nKGRhdGUsIGUpID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCB7c2luZ2xlTW9kZX0gPSB0LnByb3BzO1xuICAgIGxldCB7c3RhcnREYXRlLCBzdGFydERhdGVUeXBlLCBlbmREYXRlLCBlbmREYXRlVHlwZX0gPSB0LnByb3BzLnZhbHVlO1xuICAgIGxldCBzdGF0dXMgPSAwO1xuICAgIC8vIOWFiOWIpOaWreebruWJjeaYr+S4gOeCueeKtuaAgei/mOaYr+S4pOeCueeKtuaAge+8jOWmguaenCBzdGFydERhdGUgIT0gZW5kRGF0ZSDliJnkuLrkuKTngrnnirbmgIHvvIxcbiAgICAvLyDlkKbliJnnm7jnrYnliJnkuLrkuIDngrnjgIFzdGFydERhdGUg5Li6IDAg5YiZ5Li6MOeCueeKtuaAgVxuICAgIGlmICghIXN0YXJ0RGF0ZSkge1xuICAgICAgLy8g5aaC5p6c5piv5Y2V6YCJ5qih5byP77yM5YiZIHN0YXR1cyDmgLvkuLogMlxuICAgICAgaWYgKCEhZW5kRGF0ZSAmJiBuZXcgRGF0ZShlbmREYXRlKS5nZXRUaW1lKCkgIT09IG5ldyBEYXRlKHN0YXJ0RGF0ZSkuZ2V0VGltZSgpIHx8IHNpbmdsZU1vZGUpIHtcbiAgICAgICAgc3RhdHVzID0gMlxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHN0YXR1cyA9IDE7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICBsZXQgbmV3U3RhcnREYXRlID0gJyc7XG4gICAgbGV0IG5ld0VuZERhdGUgPSAnJztcbiAgICBsZXQgbmV3U3RhcnREYXRlVHlwZSA9ICdGVUxMJztcbiAgICBsZXQgbmV3RW5kRGF0ZVR5cGUgPSAnRlVMTCc7XG4gICAgaWYgKHN0YXR1cyA9PSAwKSB7XG4gICAgICBuZXdTdGFydERhdGUgPSBkYXRlLmdldFRpbWUoKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc3RhdHVzID09IDEpIHtcbiAgICAgIC8vIOWIpOaWreeCueWHu+eahOaXtumXtOWSjOW8gOWni+aXtumXtOeahOWkp+Wwj++8jOS7peWGs+WumuiwgeaYr+aWsOeahOW8gOWni+aXtumXtOOAglxuICAgICAgaWYgKGRhdGUuZ2V0VGltZSgpID49IG5ldyBEYXRlKHN0YXJ0RGF0ZSkuZ2V0VGltZSgpKSB7XG4gICAgICAgIG5ld1N0YXJ0RGF0ZSA9IHN0YXJ0RGF0ZTtcbiAgICAgICAgbmV3RW5kRGF0ZSA9IGRhdGUuZ2V0VGltZSgpO1xuICAgICAgICBuZXdTdGFydERhdGVUeXBlID0gc3RhcnREYXRlVHlwZTtcblxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIG5ld1N0YXJ0RGF0ZSA9IGRhdGUuZ2V0VGltZSgpO1xuICAgICAgICBuZXdFbmREYXRlID0gc3RhcnREYXRlO1xuICAgICAgICBuZXdFbmREYXRlVHlwZSA9IHN0YXJ0RGF0ZVR5cGU7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgbmV3U3RhcnREYXRlID0gZGF0ZS5nZXRUaW1lKCk7XG4gICAgfVxuXG4gICAgdC5wcm9wcy5vbkNoYW5nZSh7XG4gICAgICBzdGFydERhdGU6IG5ld1N0YXJ0RGF0ZSxcbiAgICAgIHN0YXJ0RGF0ZVR5cGU6IG5ld1N0YXJ0RGF0ZVR5cGUsXG4gICAgICBlbmREYXRlOiBuZXdFbmREYXRlLFxuICAgICAgZW5kRGF0ZVR5cGU6IG5ld0VuZERhdGVUeXBlXG4gICAgfSlcblxuICB9XG5cbiAgaGFuZGxlVHlwZUNsaWNrKHR5cGUsIGUpIHtcbiAgICBsZXQgdCA9IHRoaXM7XG4gICAgbGV0IHZhbHVlID0gKHR5cGVvZiB0LnByb3BzLnZhbHVlID09IFwic3RyaW5nXCIpID8ge3N0YXJ0RGF0ZTogdC5wcm9wcy52YWx1ZX0gOiB0LnByb3BzLnZhbHVlO1xuICAgIGxldCB7c3RhcnREYXRlLCBzdGFydERhdGVUeXBlLCBlbmREYXRlLCBlbmREYXRlVHlwZX0gPSB2YWx1ZTtcbiAgICBsZXQgc3RhdHVzID0gMDtcbiAgICBsZXQge2FjdGl2ZX0gPSB0LnN0YXRlO1xuICAgIC8vIOWFiOWIpOaWreebruWJjeaYr+S4gOeCueeKtuaAgei/mOaYr+S4pOeCueeKtuaAge+8jOWmguaenCBzdGFydERhdGUgIT0gZW5kRGF0ZSDliJnkuLrkuKTngrnnirbmgIHvvIxcbiAgICAvLyDlkKbliJnnm7jnrYnliJnkuLrkuIDngrnjgIFzdGFydERhdGUg5LiN5a2Y5Zyo5YiZ5Li6IDAg54K554q25oCBXG4gICAgaWYgKCEhc3RhcnREYXRlKSB7XG4gICAgICBpZiAoISFlbmREYXRlICYmIG5ldyBEYXRlKGVuZERhdGUpLmdldFRpbWUoKSAhPT0gbmV3IERhdGUoc3RhcnREYXRlKS5nZXRUaW1lKCkpIHtcbiAgICAgICAgc3RhdHVzID0gMlxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHN0YXR1cyA9IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IG5ld1N0YXJ0RGF0ZVR5cGUgPSBcIkZVTExcIjtcbiAgICBsZXQgbmV3RW5kRGF0ZVR5cGUgPSBcIkZVTExcIjtcblxuICAgIGlmIChzdGF0dXMgPT0gMikge1xuICAgICAgaWYgKGFjdGl2ZSA9PSAnc3RhcnREYXRlJykge1xuICAgICAgICBuZXdTdGFydERhdGVUeXBlID0gdHlwZTtcbiAgICAgICAgbmV3RW5kRGF0ZVR5cGUgPSBlbmREYXRlVHlwZTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBuZXdTdGFydERhdGVUeXBlID0gc3RhcnREYXRlVHlwZTtcbiAgICAgICAgbmV3RW5kRGF0ZVR5cGUgPSB0eXBlO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIG5ld1N0YXJ0RGF0ZVR5cGUgPSB0eXBlO1xuICAgICAgbmV3RW5kRGF0ZVR5cGUgPSB0eXBlO1xuICAgIH1cblxuICAgIHQucHJvcHMub25DaGFuZ2Uoe1xuICAgICAgc3RhcnREYXRlOiBzdGFydERhdGUsXG4gICAgICBzdGFydERhdGVUeXBlOiBuZXdTdGFydERhdGVUeXBlLFxuICAgICAgZW5kRGF0ZTogZW5kRGF0ZSxcbiAgICAgIGVuZERhdGVUeXBlOiBuZXdFbmREYXRlVHlwZVxuICAgIH0pXG5cbiAgfVxuXG4gIGhhbmRsZVRpdGxlQ2xpY2soZSkge1xuICAgIGlmICh0aGlzLnByb3BzLnNpbmdsZU1vZGUpIHtcbiAgICAgIHRoaXMucHJvcHMub25UaXRsZUNsaWNrKGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlvZPliY3ml7bpl7TmmK/lkKblnKjooqvpgInkuK3nmoTojIPlm7RcbiAgICogQHBhcmFtIHtEYXRlfSBkYXRlIOW9k+WJjeaXtumXtFxuICAgKiBAcGFyYW0ge09iamVjdH0g55SxIHByb2Nlc3NWYWx1ZSDlr7zlh7rnmoTml7bpl7TojIPlm7RcbiAgICovXG4gIGlzSW5SYW5nZShkYXRlLCB2YWx1ZSkge1xuXG4gICAgcmV0dXJuICggZGF0ZS5nZXRUaW1lKCkgPj0gdmFsdWUuc3RhcnREYXRlLmdldFRpbWUoKSApICYmICggZGF0ZS5nZXRUaW1lKCkgPD0gdmFsdWUuZW5kRGF0ZS5nZXRUaW1lKCkgKTtcbiAgfVxuXG4gIGdldFR5cGUoZGF0ZSwgdmFsdWUpIHtcbiAgICBsZXQgdHlwZSA9ICcnO1xuICAgIFsnRlVMTCcsICdBTScsICdQTSddLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICBpZiAoIChkYXRlLmdldFRpbWUoKSA9PSB2YWx1ZS5zdGFydERhdGUuZ2V0VGltZSgpICYmIG5ldyBSZWdFeHAoaXRlbSwgJ2knKS50ZXN0KHZhbHVlLnN0YXJ0RGF0ZVR5cGUpKSB8fFxuICAgICAgICAgICAoZGF0ZS5nZXRUaW1lKCkgPT0gdmFsdWUuZW5kRGF0ZS5nZXRUaW1lKCkgJiYgbmV3IFJlZ0V4cChpdGVtLCAnaScpLnRlc3QodmFsdWUuZW5kRGF0ZVR5cGUpKSApIHtcbiAgICAgICAgdHlwZSA9IGl0ZW07XG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gdHlwZTtcbiAgfVxuXG4gIHJlbmRlckRhdGUoZGF0ZSwgdmFsdWUpIHtcbiAgICBsZXQgdCA9IHRoaXM7XG4gICAgLy8gVE9ETzogdFN0YXR1cyDlgYfkvJHnj61cbiAgICAvLyDlj6rmnInlvIDlp4vlkoznu5PmnZ/nmoTml6XlrZDlj6/og73lh7rnjrDkuIrljYjlkozkuIvljYhcbiAgICBsZXQgdHlwZSA9IHQuZ2V0VHlwZShkYXRlLCB2YWx1ZSk7XG4gICAgbGV0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgbGV0IGN1cnJlbnREYXRlID0gdC5zdGF0ZS5jdXJyZW50RGF0ZVxuICAgIGxldCBjbHMgPSBjbGFzc25hbWVzKHtcbiAgICAgIFtwcmVmaXhDbGFzcygnRkIxIHRhcCBvcCcpXTogdHJ1ZSxcbiAgICAgIFtwcmVmaXhDbGFzcygnbm93JyldOiBub3cuZ2V0VGltZSgpID09IGRhdGUuZ2V0VGltZSgpLFxuICAgICAgW3ByZWZpeENsYXNzKCdzZWxlY3RlZCcpXTogdC5pc0luUmFuZ2UoZGF0ZSwgdmFsdWUpLFxuICAgICAgW3ByZWZpeENsYXNzKCdBTScpXTogdHlwZSA9PSAnQU0nLFxuICAgICAgW3ByZWZpeENsYXNzKCdQTScpXTogdHlwZSA9PSAnUE0nLFxuICAgICAgW3ByZWZpeENsYXNzKCdwcmV2LW1vbnRoJyldOiAoZGF0ZS5nZXRNb250aCgpIDwgY3VycmVudERhdGUuZ2V0TW9udGgoKSAmJiBkYXRlLmdldFllYXIoKSA9PT0gY3VycmVudERhdGUuZ2V0WWVhcigpKVxuICAgICAgICB8fCBkYXRlLmdldFllYXIoKSA8IGN1cnJlbnREYXRlLmdldFllYXIoKSxcbiAgICAgIFtwcmVmaXhDbGFzcygnbmV4dC1tb250aCcpXTogKGRhdGUuZ2V0TW9udGgoKSA+IGN1cnJlbnREYXRlLmdldE1vbnRoKCkgJiYgZGF0ZS5nZXRZZWFyKCkgPT09IGN1cnJlbnREYXRlLmdldFllYXIoKSlcbiAgICAgICAgfHwgZGF0ZS5nZXRZZWFyKCkgPiBjdXJyZW50RGF0ZS5nZXRZZWFyKCksXG4gICAgICBbcHJlZml4Q2xhc3MoJ3dlZWtlbmQnKV06IGRhdGUuZ2V0RGF5KCkgPT09IDYgfHwgZGF0ZS5nZXREYXkoKSA9PT0gMCxcbiAgICAgIFt0LmhhbmRsZUV4dHJhQ2xhc3MoZGF0ZSwgdmFsdWUpXTogdHJ1ZVxuICAgIH0pO1xuICAgIC8v5Zyo6L+Z6YeM5re75Yqg5paw5Yqf6IO977yM56Gu5a6a5LiN5Y+v55So5pel5pyfXG4gICAgbGV0IGRhdGVDb250ZW50ID0gPGRpdiBrZXk9e2RhdGUuZ2V0VGltZSgpfSBjbGFzc05hbWU9e2Nsc30gb25DbGljaz17dC5oYW5kbGVDbGljay5iaW5kKHQsIG5ldyBEYXRlKGRhdGUpKX0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17cHJlZml4Q2xhc3MoJ2RhdGUtcG9pbnQnKX0+XG4gICAgICAgIHtkYXRlLmdldERhdGUoKX1cbiAgICAgIDwvZGl2PlxuICAgICAge3QucHJvcHMuc2hvd0hhbGZEYXkgP1xuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NuYW1lcyh7IFtwcmVmaXhDbGFzcygnZGF0ZS10aXAnKV06IHRydWUgfSl9PlxuICAgICAgICAgIHt0LnByb3BzLnNob3dIYWxmRGF5ID8gdC5sb2NhbGVbJ2RheVRpcE1hcCddW3R5cGVdIDogXCJcIn1cbiAgICAgICAgPC9kaXY+IDogJyd9XG4gICAgPC9kaXY+XG4gICAgcmV0dXJuIGRhdGVDb250ZW50O1xuICB9XG5cbiAgLy/nu5nigJzlpKnigJ3nmoTlsZXnpLrpobnnm67mt7vliqDmlrDnmoTmoLflvI9cbiAgaGFuZGxlRXh0cmFDbGFzcyhkYXRlLCB2YWx1ZSkge1xuICAgIC8v5aaC5p6c5re75Yqg55qE5piv5LiA5Liq5a2X56ym5LiyXG4gICAgaWYodHlwZW9mIHRoaXMucHJvcHMuZXh0cmFDbGFzcyA9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZXh0cmFDbGFzcztcbiAgICB9XG4gICAgZWxzZSBpZih0eXBlb2YgdGhpcy5wcm9wcy5leHRyYUNsYXNzID09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLmV4dHJhQ2xhc3MoZGF0ZSwgdmFsdWUpIHx8ICcnO1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICByZW5kZXJEYXRlUGFuZWwodmFsdWUpIHtcbiAgICBsZXQgdCA9IHRoaXM7XG4gICAgbGV0IGRhdGVBcnJJbkFXZWVrID0gW107XG4gICAgbGV0IHdlZWtBcnIgPSBbXTtcbiAgICBsZXQgZmxleEJveEtleSA9IDA7XG4gICAgbGV0IHtjdXJyZW50RGF0ZX0gPSB0LnN0YXRlO1xuICAgIGxldCBjdXJyZW50WWVhciA9IGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgbGV0IGN1cnJlbnRNb250aCA9IGN1cnJlbnREYXRlLmdldE1vbnRoKCk7XG4gICAgbGV0IHtjYWxlbmRhckNvZGV9ID0gdC5wcm9wcztcbiAgICBsZXQgbm93ID0gbmV3IERhdGUoKTtcbiAgICBsZXQgZmlyc3REYXRlSW5TdGFydE1vbnRoID0gbmV3IERhdGUobmV3IERhdGUoY3VycmVudERhdGUpLnNldERhdGUoMSkpO1xuICAgIGxldCBjaGFuZ2VkRGF0ZSA9ICBuZXcgRGF0ZShuZXcgRGF0ZShjdXJyZW50RGF0ZSkuc2V0RGF0ZSgxKSk7IC8vIOeUqOS6juW9k+aciOeahOW+queOr+WkjeWItlxuICAgIGxldCBmaXJzdERheUluU3RhcnRNb250aCA9IGZpcnN0RGF0ZUluU3RhcnRNb250aC5nZXREYXkoKTtcbiAgICBsZXQgZmlyc3REYXRlU2hvd25JblBhbmVsID0gbmV3IERhdGUoZmlyc3REYXRlSW5TdGFydE1vbnRoLnNldERhdGUoZmlyc3REYXRlSW5TdGFydE1vbnRoLmdldERhdGUoKSAtIGZpcnN0RGF5SW5TdGFydE1vbnRoKSk7XG5cbiAgICAvL+iuoeeul+S4iuS4quaciOWJqeS9meihpeWFheWkqeaVsFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlyc3REYXlJblN0YXJ0TW9udGg7IGkrKykge1xuICAgICAgbGV0IGNoYW5nZWREYXRlID0gbmV3IERhdGUoZmlyc3REYXRlU2hvd25JblBhbmVsKTtcbiAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoY2hhbmdlZERhdGUuc2V0RGF0ZShjaGFuZ2VkRGF0ZS5nZXREYXRlKCkgKyBpKSk7XG4gICAgICBkYXRlQXJySW5BV2Vlay5wdXNoKHQucmVuZGVyRGF0ZShkYXRlLCB2YWx1ZSkpO1xuICAgIH1cblxuICAgIC8vIOiuoeeul+W9k+WJjeaciOWkqeaVsFxuXG4gICAgd2hpbGUgKGNoYW5nZWREYXRlLmdldE1vbnRoKCkgPT0gY3VycmVudE1vbnRoKSB7XG4gICAgICBmbGV4Qm94S2V5Kys7XG4gICAgICAvLyDliKTmlq0gZGF0ZUFyckluQVdlZWsg5pWw57uE5piv5ZCm5bey5ruhIDcg5Liq77yM6Iul5ruh5YiZ5o6o5YWlIHdlZWtBcnIg5pWw57uEXG4gICAgICBpZiAoZGF0ZUFyckluQVdlZWsubGVuZ3RoID09IDcpIHtcbiAgICAgICAgd2Vla0Fyci5wdXNoKDxkaXYga2V5PXtjdXJyZW50TW9udGggKyBmbGV4Qm94S2V5fSBjbGFzc05hbWU9e3ByZWZpeENsYXNzKCdGQkgnKX0+e2RhdGVBcnJJbkFXZWVrfTwvZGl2Pik7XG4gICAgICAgIGRhdGVBcnJJbkFXZWVrID0gW107XG4gICAgICB9XG4gICAgICBkYXRlQXJySW5BV2Vlay5wdXNoKHQucmVuZGVyRGF0ZShuZXcgRGF0ZShjaGFuZ2VkRGF0ZSksIHZhbHVlKSk7XG4gICAgICBjaGFuZ2VkRGF0ZS5zZXREYXRlKGNoYW5nZWREYXRlLmdldERhdGUoKSArIDEpO1xuXG4gICAgfVxuXG4gICAgLy8g6K6h566X5LiL5Liq5pyI5Ymp5L2Z6KGl5YWF5aSp5pWw77yM5aaC5p6c5LiL5Liq5pyI56ys5LiA5aSp5oGw5aW95piv5ZGo5pel77yM6YKj5LmI5bCx5rKh5pyJ5b+F6KaB5riy5p+T5LiL5Liq5pyI5LqGXG4gICAgLy8g5oqK5pyA5ZCO5LiA5LiqIGRhdGVBcnJJbkFXZWVrIOaVsOe7hOaOqOi/myB3ZWVrQXJyIOaVsOe7hFxuICAgIGlmIChjaGFuZ2VkRGF0ZS5nZXREYXkoKSA9PSAwKSB7XG4gICAgICB3ZWVrQXJyLnB1c2goPGRpdiBrZXk9e1wibGFzdFwifSBjbGFzc05hbWU9e3ByZWZpeENsYXNzKCdGQkgnKX0+e2RhdGVBcnJJbkFXZWVrfTwvZGl2Pik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgbGV0IGRlbHRhID0gNyAtIGNoYW5nZWREYXRlLmdldERheSgpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZWx0YTsgaSsrKSB7XG4gICAgICAgIGRhdGVBcnJJbkFXZWVrLnB1c2godC5yZW5kZXJEYXRlKG5ldyBEYXRlKGNoYW5nZWREYXRlKSwgdmFsdWUpKTtcbiAgICAgICAgY2hhbmdlZERhdGUuc2V0RGF0ZShjaGFuZ2VkRGF0ZS5nZXREYXRlKCkgKyAxKVxuICAgICAgfVxuICAgICAgd2Vla0Fyci5wdXNoKDxkaXYga2V5PXtcImxhc3RcIn0gY2xhc3NOYW1lPXtwcmVmaXhDbGFzcygnRkJIJyl9PntkYXRlQXJySW5BV2Vla308L2Rpdj4pXG4gICAgfVxuXG4gICAgcmV0dXJuIHdlZWtBcnI7XG4gIH1cblxuICByZW5kZXJIYWxmRGF5QnV0dG9uKGRhdGUsIHZhbHVlKSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLnNob3dIYWxmRGF5KSByZXR1cm47XG5cbiAgICBsZXQgdCA9IHRoaXM7XG4gICAgbGV0IHthY3RpdmV9ID0gdC5zdGF0ZTtcbiAgICBsZXQgdHlwZSA9IHQuZ2V0VHlwZShkYXRlLCB2YWx1ZSk7XG4gICAgbGV0IGFtID0gPGRpdiBrZXk9XCJ0TW9ybmluZ1wiIGNsYXNzTmFtZT17cHJlZml4Q2xhc3MoXCJkYXkgbW9ybmluZyB0YXAgb3AgXCIpICsgKHR5cGUgPT0gJ0FNJyA/ICdub3cnIDogJycgKX1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3QuaGFuZGxlVHlwZUNsaWNrLmJpbmQodCwgJ0FNJyl9PlxuICAgICAgICAgICAgICA8c3Bhbj57dC5sb2NhbGVbJ2RheVRpcE1hcCddWydBTSddfTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PjtcbiAgICBsZXQgcG0gPSA8ZGl2IGtleT1cInRBZnRlcm5vb25cIiBjbGFzc05hbWU9e3ByZWZpeENsYXNzKFwiZGF5IGFmdGVybm9vbiB0YXAgb3AgXCIpICsgKHR5cGUgPT0gJ1BNJyA/ICdub3cnIDogJycgKX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0LmhhbmRsZVR5cGVDbGljay5iaW5kKHQsICdQTScpfT5cbiAgICAgICAgICAgICAgPHNwYW4+e3QubG9jYWxlWydkYXlUaXBNYXAnXVsnUE0nXX08L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj47XG4gICAgbGV0IGZ1bGwgPSA8ZGl2IGtleT1cInRGdWxsRGF5XCIgY2xhc3NOYW1lPXtwcmVmaXhDbGFzcyhcImRheSBmdWxsZGF5IHRhcCBvcCBcIikgKyAodHlwZSA9PSAnRlVMTCcgPyAnbm93JyA6ICcnICl9XG4gICAgICAgICAgICAgICAgICAgb25DbGljaz17dC5oYW5kbGVUeXBlQ2xpY2suYmluZCh0LCAnRlVMTCcpfT5cbiAgICAgICAgICAgICAgICA8c3Bhbj57dC5sb2NhbGVbJ2RheVRpcE1hcCddWydGVUxMJ119PC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgIC8vIOWkhOeQhuiiq+mAieS4reeahOaXpeacn++8jOmcgOWIpOaWreW9k+WJjeaYr+i1t+eCuei/mOaYr+e7iOeCue+8jOiLpSDlvIDlp4vml7bpl7QgPT0g57uT5p2f5pe26Ze0IOWImeaYr+i1t+eCuVxuXG4gICAgLy/mmK/lkKbmmL7npLrkuIrljYjjgIHkuIvljYhcbiAgICBpZiAodmFsdWUuc3RhcnREYXRlLmdldFRpbWUoKSA9PT0gdmFsdWUuZW5kRGF0ZS5nZXRUaW1lKCkpIHtcbiAgICAgIHJldHVybiBbZnVsbCwgYW0sIHBtXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAoYWN0aXZlID09ICdlbmREYXRlJykge1xuICAgICAgICByZXR1cm4gW2Z1bGwsIGFtXVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbZnVsbCwgcG1dXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyVGl0bGUodmFsdWUpIHtcbiAgICBsZXQgdCA9IHRoaXM7XG4gICAgbGV0IHtjdXJyZW50RGF0ZX0gPSB0LnN0YXRlO1xuICAgIGxldCBzdHIgPSAnJztcbiAgICBzd2l0Y2ggKHQucHJvcHMubG9jYWxlKSB7XG4gICAgICBjYXNlICd6aC1jbic6XG4gICAgICAgIHN0ciA9IGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCkgKyAn5bm0JyArIChjdXJyZW50RGF0ZS5nZXRNb250aCgpICsgMSkgKyAn5pyIJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdlbic6XG4gICAgICAgIHN0ciA9IHQubG9jYWxlWydtb250aFRpdGxlJ11bY3VycmVudERhdGUuZ2V0TW9udGgoKV0gKyAnICcgKyBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuXG4gIHJlbmRlckhhbGZEYXkoKSB7XG4gICAgbGV0IHQgPSB0aGlzO1xuICAgIGxldCB2YWx1ZSA9IHQucHJvY2Vzc1ZhbHVlKCk7XG4gICAgbGV0IHthY3RpdmV9ID0gdC5zdGF0ZTtcbiAgICBsZXQgbGVmdCA9IHQucmVuZGVySGFsZkRheUJ1dHRvbih2YWx1ZVthY3RpdmVdLCB2YWx1ZSk7XG4gICAgbGV0IHNlbGVjdGVkID0gdmFsdWVbYWN0aXZlXS5nZXREYXRlKCk7XG4gICAgcmV0dXJuICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NuYW1lcyh7XG4gICAgICAgICAgICAgICAgW3ByZWZpeENsYXNzKFwiaGFsZi13cmFwIEZCSCBGQkFDXCIpXTogdHJ1ZVxuICAgICAgICAgICAgfSl9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NuYW1lcyh7XG4gICAgICAgICAgICAgICAgW3ByZWZpeENsYXNzKFwic2VsZWN0ZWQtZGF5XCIpXTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBbcHJlZml4Q2xhc3MoXCJETlwiKV06ICF0LnByb3BzLnNob3dIYWxmRGF5XG4gICAgICAgICAgICAgIH0pfT57c2VsZWN0ZWR9PC9kaXY+XG4gICAgICAgICAgICAgIHtsZWZ0fVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17cHJlZml4Q2xhc3MoXCJGQjFcIil9PjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgbGV0IHQgPSB0aGlzO1xuICAgIGxldCB2YWx1ZSA9IHQucHJvY2Vzc1ZhbHVlKCk7XG4gICAgbGV0IGNsZWFyQnV0dG9uID0gJyc7XG4gICAgbGV0IHJldCA9ICcnO1xuICAgIGxldCB7c2hvdywgY2xhc3NOYW1lLCBzaW5nbGVNb2RlLCBzaG93SGFsZkRheX0gPSB0LnByb3BzO1xuXG4gICAgaWYgKHNob3cpIHtcbiAgICAgIHJldCA9IHRoaXMucmVuZGVyRGF0ZVBhbmVsKHZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17cHJlZml4Q2xhc3MoJ21vbnRoLXBhbmVsJyl9PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtwcmVmaXhDbGFzcygndG9vbCBGQkggRkJBQycpfT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtwcmVmaXhDbGFzcygnRkIxJyl9PjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3ByZWZpeENsYXNzKCdidG4gcHJldi1tb250aCB0YXAgb3AnKX0gb25DbGljaz17dC5oYW5kbGVQcmV2LmJpbmQodCl9PiZsdDs8L2Rpdj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17cHJlZml4Q2xhc3MoJ3RleHQnKX0gb25DbGljaz17dC5oYW5kbGVUaXRsZUNsaWNrLmJpbmQodCl9Pnt0aGlzLnJlbmRlclRpdGxlKHZhbHVlKX08L3NwYW4+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17cHJlZml4Q2xhc3MoJ2J0biBuZXh0LW1vbnRoIHRhcCBvcCcpfSBvbkNsaWNrPXt0LmhhbmRsZU5leHQuYmluZCh0KX0+Jmd0OzwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3ByZWZpeENsYXNzKCdGQjEnKX0+PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3ByZWZpeENsYXNzKCd3ZWVrIEZCSCcpfT5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdC5sb2NhbGVbJ3dlZWtUaXRsZSddLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e3ByZWZpeENsYXNzKCdGQjEgRkJBQycpfSBrZXk9e2luZGV4fT57aXRlbX08L2Rpdj5cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17cHJlZml4Q2xhc3MoJ21vbnRoJyl9PlxuICAgICAgICAgICAge3JldH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7dC5wcm9wcy5zaG93SGFsZkRheSAmJiB0LnJlbmRlckhhbGZEYXkoKX1cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG59XG5cblxuRGF5LnByb3BUeXBlcyA9IHtcbiAgc2hvdzogUmVhY3QuUHJvcFR5cGVzLmJvb2wsIC8vIOaYr+WQpuaYvuekulxuICBzaW5nbGVNb2RlOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCwgLy8g5piv5ZCm5piv5Y2V6YCJ5qih5byPXG4gIHNob3dIYWxmRGF5OiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCwgLy8g5piv5ZCm5pi+56S65Y2K5aSpXG4gIGNhbGVuZGFyQ29kZTogUmVhY3QuUHJvcFR5cGVzLm9iamVjdCwgLy8g5ZCO56uv5Lyg5p2l55qEIGNvZGVcbiAgdmFsdWU6IFJlYWN0LlByb3BUeXBlcy5vbmVPZlR5cGUoWyAvLyDpu5jorqTlgLxcbiAgICBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIFJlYWN0LlByb3BUeXBlcy5vYmplY3RcbiAgXSksXG4gIGV4dHJhQ2xhc3M6IFJlYWN0LlByb3BUeXBlcy5vbmVPZlR5cGUoWyAvLyDpu5jorqTlgLxcbiAgICBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIFJlYWN0LlByb3BUeXBlcy5mdW5jXG4gIF0pLFxuICBvblNlbGVjdGluZzogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsIC8v5b2T5p+Q5LiA5aSp6KKr54K55Ye75piv6Kem5Y+R5LqL5Lu277yM5aaC5p6c5YW25YC85Li6ZmFsc2XliJnkuI3miafooYxcbiAgbG9jYWxlOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLCAvLyDlm73pmYXljJbor63oqIBcbiAgb25DaGFuZ2U6IFJlYWN0LlByb3BUeXBlcy5mdW5jLCAvLyB2YWx1ZSDlj5jljJbml7bop6blj5HnmoTlm57osINcbiAgb25UaXRsZUNsaWNrOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyAvLyDngrnlh7vmoIfpopjml7bop6blj5HnmoTlm57osIPvvIznlKjkuo7liIfmjaLpnaLmnb9cbn1cblxuRGF5LmRlZmF1bHRQcm9wcyA9IHtcbiAgc2hvdzogdHJ1ZSxcbiAgc2luZ2xlTW9kZTogdHJ1ZSxcbiAgc2hvd0hhbGZEYXk6IHRydWUsXG4gIGxvY2FsZTogJ3poLWNuJyxcbiAgY2FsZW5kYXJDb2RlOiB7fSxcbiAgb25DaGFuZ2U6ICgpID0+IHt9LFxuICBvblNlbGVjdGluZzogKCkgPT4ge30sXG4gIG9uVGl0bGVDbGljazogKCkgPT4ge30sXG4gIGV4dHJhQ2xhc3M6ICcnXG59XG5cbkRheS5kaXNwbGF5TmFtZSA9IFwiRGF5XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gRGF5O1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
