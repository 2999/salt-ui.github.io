'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * Tab Component for tingle
 * @author zhangshun@alipay.com
 *
 * Copyright 2014-2016, Tingle Team.
 * All rights reserved.
 */
var React = require('react');
var classnames = require('classnames');
var Context = require('@ali/tingle-context');
var Scroller = require('@ali/tingle-scroller');
var TabItem = require('./TabItem');
var prefixClass = Context.prefixClass;
var iScroll = require("@ali/tingle-scroller/dist/iscroll");

var Tab = function (_React$Component) {
    _inherits(Tab, _React$Component);

    function Tab(props) {
        _classCallCheck(this, Tab);

        var _this = _possibleConstructorReturn(this, (Tab.__proto__ || Object.getPrototypeOf(Tab)).call(this, props));

        _this.state = {
            active: props.active
        };
        return _this;
    }

    _createClass(Tab, [{
        key: 'componentDidMount',
        value: function componentDidMount() {
            // 计算宽度和滚动
            var t = this;
            if (!t.props.showScroll) {
                return;
            }
            var w = 0;
            var scrollEl = ReactDOM.findDOMNode(t.refs.scroll);
            var chNodes = scrollEl.childNodes;
            for (var i = 0, l = chNodes.length; i < l; i++) {
                w += chNodes[i].offsetWidth + 1;
            }

            scrollEl.style.width = w + "px";
            // 实例化滚动
            t.refs.head.scroller.refresh();
        }
    }, {
        key: 'componentWillReceiveProps',
        value: function componentWillReceiveProps(nextProps) {
            var t = this;
            if (nextProps.active !== t.state.active) {
                t.setState({
                    active: nextProps.active
                });
            }
        }
    }, {
        key: 'componentDidUpdate',
        value: function componentDidUpdate(prevProps, prevState) {
            //fix issue #8
            if (this.state.active !== prevState.active) {
                this.setActiveTabItemVisible();
            }
        }
    }, {
        key: 'setActiveTabItemVisible',
        value: function setActiveTabItemVisible() {
            if (!this.props.showScroll) {
                //没有scroll的时候，active tab必然是可见的
                return true;
            }

            var activeTab = this.findActiveTab();
            if (!this.tabVisible(activeTab)) {
                this.refs.head.scroller.scrollToElement(activeTab, 'auto', true, true);
            }
        }
    }, {
        key: 'tabVisible',
        value: function tabVisible(tab) {
            var scroller = this.refs.head.scroller;
            var tabOffset = iScroll.utils.offset(tab);
            var wrapperWidth = scroller.wrapperWidth;

            //scroll使用的offset像素坐标都是负值，使用的时候做Math.abs处理，方便计算
            var headOffsetRange = {
                left: Math.abs(scroller.x),
                right: Math.abs(scroller.x + -wrapperWidth)
            };

            var tabLeft = Math.abs(tabOffset.left);
            var tabRight = Math.abs(tabOffset.right);

            if (tabLeft >= headOffsetRange.left) {
                return tabLeft < headOffsetRange.right;
            }

            if (tabRight < headOffsetRange.left) {
                return tabRight <= headOffsetRange.right;
            }
        }
    }, {
        key: 'findActiveTab',
        value: function findActiveTab() {
            var refKey = 'tab_' + this.state.active;
            return ReactDOM.findDOMNode(this.refs[refKey]);
        }
    }, {
        key: 'handleChange',
        value: function handleChange(active, data, e) {
            var t = this;
            var preActive = t.state.active;
            t.setState({
                active: active
            });
            t.props.onChange({
                active: active,
                preActive: preActive,
                data: data,
                e: e
            });
        }
    }, {
        key: 'render',
        value: function render() {
            var _classnames;

            var t = this;
            return React.createElement(
                'div',
                { ref: 'root', className: classnames((_classnames = {}, _defineProperty(_classnames, prefixClass('tab'), true), _defineProperty(_classnames, t.props.type, true), _defineProperty(_classnames, t.props.className, !!t.props.className), _defineProperty(_classnames, "fixed-top", !!t.props.fixedTop), _defineProperty(_classnames, "fixed-bottom", !t.props.fixedTop && !!t.props.fixedBottom), _classnames)) },
                t._renderHead(),
                t._renderBody(),
                t.props.showScroll && t._renderPendant()
            );
        }
    }, {
        key: '_renderHead',
        value: function _renderHead() {
            var t = this;
            if (t.props.showScroll) {
                //添加右边icon
                return React.createElement(
                    Scroller,
                    { className: prefixClass('tab-head'), scrollX: true, scrollY: false, ref: 'head' },
                    t._renderHeadContent(true, t)
                );
            } else {
                return React.createElement(
                    'div',
                    { className: prefixClass('tab-head'), ref: 'head' },
                    t._renderHeadContent(false, t)
                );
            }
        }
    }, {
        key: '_renderHeadContent',
        value: function _renderHeadContent(scroll, t) {
            var _classnames2;

            return React.createElement(
                'div',
                { className: classnames((_classnames2 = {}, _defineProperty(_classnames2, prefixClass('tab-head-scroll'), scroll), _defineProperty(_classnames2, prefixClass('tab-head-container'), true), _defineProperty(_classnames2, prefixClass('CL'), scroll), _defineProperty(_classnames2, prefixClass('FBH'), !scroll), _classnames2)), ref: 'scroll' },
                React.Children.map(t.props.children, function (child, active) {
                    var _classnames3;

                    var _className = classnames((_classnames3 = {}, _defineProperty(_classnames3, prefixClass('tab-head-item'), true), _defineProperty(_classnames3, prefixClass('FAC'), true), _defineProperty(_classnames3, prefixClass('FL'), scroll), _defineProperty(_classnames3, prefixClass('FB1'), !scroll), _defineProperty(_classnames3, 'active', t.state.active == active), _classnames3));
                    return React.createElement(
                        'div',
                        { className: _className, key: active, active: active, ref: 'tab_' + active,
                            onClick: t.handleChange.bind(t, active, child.props.data) },
                        React.createElement(
                            'span',
                            null,
                            child.props.title
                        )
                    );
                })
            );
        }
    }, {
        key: '_renderPendant',
        value: function _renderPendant() {
            //渲染右边自定义的小零件
            var t = this;
            var pendant = t.props.pendant;

            if (pendant && React.isValidElement(pendant)) {
                return React.cloneElement(pendant, {
                    role: "pendant"
                });
            }
        }
    }, {
        key: '_renderBody',
        value: function _renderBody() {
            var t = this;
            var activeBody = [];

            React.Children.forEach(t.props.children, function (child, active) {
                var _classnames4;

                var _className = classnames((_classnames4 = {}, _defineProperty(_classnames4, prefixClass('tab-body-item'), true), _defineProperty(_classnames4, prefixClass('hide'), t.state.active !== active), _classnames4));
                activeBody.push(React.createElement(
                    'div',
                    { className: _className, key: active, active: t.state.active === active },
                    child
                ));
            });

            if (t.props.destroyInactiveTabPane) {
                activeBody = activeBody.filter(function (body) {
                    return body.props.active;
                });
            }

            return React.createElement(
                'div',
                { className: prefixClass('tab-body') },
                activeBody
            );
        }
    }]);

    return Tab;
}(React.Component);

Tab.defaultProps = {
    active: 0,
    type: '',
    onChange: Context.noop,
    showScroll: false,
    destroyInactiveTabPane: false,
    //固定顶部
    fixedTop: false,
    //固定底部
    fixedBottom: false
};

// http://facebook.github.io/react/docs/reusable-components.html
Tab.propTypes = {
    active: React.PropTypes.number,
    type: React.PropTypes.oneOf(['', 'brick']),
    onChange: React.PropTypes.func,
    showScroll: React.PropTypes.bool,
    destroyInactiveTabPane: React.PropTypes.bool,
    pendant: React.PropTypes.element,
    fixedTop: React.PropTypes.bool,
    fixedBottom: React.PropTypes.bool
};

Tab.Item = TabItem;
Tab.displayName = 'Tab';

module.exports = Tab;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRhYi5qcyJdLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJjbGFzc25hbWVzIiwiQ29udGV4dCIsIlNjcm9sbGVyIiwiVGFiSXRlbSIsInByZWZpeENsYXNzIiwiaVNjcm9sbCIsIlRhYiIsInByb3BzIiwic3RhdGUiLCJhY3RpdmUiLCJ0Iiwic2hvd1Njcm9sbCIsInciLCJzY3JvbGxFbCIsIlJlYWN0RE9NIiwiZmluZERPTU5vZGUiLCJyZWZzIiwic2Nyb2xsIiwiY2hOb2RlcyIsImNoaWxkTm9kZXMiLCJpIiwibCIsImxlbmd0aCIsIm9mZnNldFdpZHRoIiwic3R5bGUiLCJ3aWR0aCIsImhlYWQiLCJzY3JvbGxlciIsInJlZnJlc2giLCJuZXh0UHJvcHMiLCJzZXRTdGF0ZSIsInByZXZQcm9wcyIsInByZXZTdGF0ZSIsInNldEFjdGl2ZVRhYkl0ZW1WaXNpYmxlIiwiYWN0aXZlVGFiIiwiZmluZEFjdGl2ZVRhYiIsInRhYlZpc2libGUiLCJzY3JvbGxUb0VsZW1lbnQiLCJ0YWIiLCJ0YWJPZmZzZXQiLCJ1dGlscyIsIm9mZnNldCIsIndyYXBwZXJXaWR0aCIsImhlYWRPZmZzZXRSYW5nZSIsImxlZnQiLCJNYXRoIiwiYWJzIiwieCIsInJpZ2h0IiwidGFiTGVmdCIsInRhYlJpZ2h0IiwicmVmS2V5IiwiZGF0YSIsImUiLCJwcmVBY3RpdmUiLCJvbkNoYW5nZSIsInR5cGUiLCJjbGFzc05hbWUiLCJmaXhlZFRvcCIsImZpeGVkQm90dG9tIiwiX3JlbmRlckhlYWQiLCJfcmVuZGVyQm9keSIsIl9yZW5kZXJQZW5kYW50IiwiX3JlbmRlckhlYWRDb250ZW50IiwiQ2hpbGRyZW4iLCJtYXAiLCJjaGlsZHJlbiIsImNoaWxkIiwiX2NsYXNzTmFtZSIsImhhbmRsZUNoYW5nZSIsImJpbmQiLCJ0aXRsZSIsInBlbmRhbnQiLCJpc1ZhbGlkRWxlbWVudCIsImNsb25lRWxlbWVudCIsInJvbGUiLCJhY3RpdmVCb2R5IiwiZm9yRWFjaCIsInB1c2giLCJkZXN0cm95SW5hY3RpdmVUYWJQYW5lIiwiZmlsdGVyIiwiYm9keSIsIkNvbXBvbmVudCIsImRlZmF1bHRQcm9wcyIsIm5vb3AiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJudW1iZXIiLCJvbmVPZiIsImZ1bmMiLCJib29sIiwiZWxlbWVudCIsIkl0ZW0iLCJkaXNwbGF5TmFtZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7O0FBT0EsSUFBTUEsUUFBUUMsUUFBUSxPQUFSLENBQWQ7QUFDQSxJQUFNQyxhQUFhRCxRQUFRLFlBQVIsQ0FBbkI7QUFDQSxJQUFNRSxVQUFVRixRQUFRLHFCQUFSLENBQWhCO0FBQ0EsSUFBTUcsV0FBV0gsUUFBUSxzQkFBUixDQUFqQjtBQUNBLElBQU1JLFVBQVVKLFFBQVEsV0FBUixDQUFoQjtBQUNBLElBQUlLLGNBQWNILFFBQVFHLFdBQTFCO0FBQ0EsSUFBTUMsVUFBVU4sUUFBUSxtQ0FBUixDQUFoQjs7SUFFTU8sRzs7O0FBRUYsaUJBQVlDLEtBQVosRUFBbUI7QUFBQTs7QUFBQSw4R0FDVEEsS0FEUzs7QUFFZixjQUFLQyxLQUFMLEdBQWE7QUFDVEMsb0JBQVFGLE1BQU1FO0FBREwsU0FBYjtBQUZlO0FBS2xCOzs7OzRDQUVtQjtBQUNoQjtBQUNBLGdCQUFJQyxJQUFJLElBQVI7QUFDQSxnQkFBSSxDQUFDQSxFQUFFSCxLQUFGLENBQVFJLFVBQWIsRUFBeUI7QUFDckI7QUFDSDtBQUNELGdCQUFJQyxJQUFJLENBQVI7QUFDQSxnQkFBSUMsV0FBV0MsU0FBU0MsV0FBVCxDQUFxQkwsRUFBRU0sSUFBRixDQUFPQyxNQUE1QixDQUFmO0FBQ0EsZ0JBQUlDLFVBQVVMLFNBQVNNLFVBQXZCO0FBQ0EsaUJBQUssSUFBSUMsSUFBSSxDQUFSLEVBQVdDLElBQUlILFFBQVFJLE1BQTVCLEVBQW9DRixJQUFJQyxDQUF4QyxFQUEyQ0QsR0FBM0MsRUFBZ0Q7QUFDNUNSLHFCQUFLTSxRQUFRRSxDQUFSLEVBQVdHLFdBQVgsR0FBeUIsQ0FBOUI7QUFDSDs7QUFFRFYscUJBQVNXLEtBQVQsQ0FBZUMsS0FBZixHQUF1QmIsSUFBSSxJQUEzQjtBQUNBO0FBQ0FGLGNBQUVNLElBQUYsQ0FBT1UsSUFBUCxDQUFZQyxRQUFaLENBQXFCQyxPQUFyQjtBQUNIOzs7a0RBRXlCQyxTLEVBQVc7QUFDakMsZ0JBQUluQixJQUFJLElBQVI7QUFDQSxnQkFBSW1CLFVBQVVwQixNQUFWLEtBQXFCQyxFQUFFRixLQUFGLENBQVFDLE1BQWpDLEVBQXlDO0FBQ3JDQyxrQkFBRW9CLFFBQUYsQ0FBVztBQUNQckIsNEJBQVFvQixVQUFVcEI7QUFEWCxpQkFBWDtBQUdIO0FBQ0o7OzsyQ0FFa0JzQixTLEVBQVdDLFMsRUFBVztBQUNyQztBQUNBLGdCQUFHLEtBQUt4QixLQUFMLENBQVdDLE1BQVgsS0FBc0J1QixVQUFVdkIsTUFBbkMsRUFBMkM7QUFDdkMscUJBQUt3Qix1QkFBTDtBQUNIO0FBQ0o7OztrREFFeUI7QUFDdEIsZ0JBQUcsQ0FBQyxLQUFLMUIsS0FBTCxDQUFXSSxVQUFmLEVBQTJCO0FBQ3ZCO0FBQ0EsdUJBQU8sSUFBUDtBQUNIOztBQUVELGdCQUFJdUIsWUFBWSxLQUFLQyxhQUFMLEVBQWhCO0FBQ0EsZ0JBQUcsQ0FBQyxLQUFLQyxVQUFMLENBQWdCRixTQUFoQixDQUFKLEVBQWdDO0FBQzVCLHFCQUFLbEIsSUFBTCxDQUFVVSxJQUFWLENBQWVDLFFBQWYsQ0FBd0JVLGVBQXhCLENBQXdDSCxTQUF4QyxFQUFtRCxNQUFuRCxFQUEyRCxJQUEzRCxFQUFpRSxJQUFqRTtBQUNIO0FBQ0o7OzttQ0FFVUksRyxFQUFLO0FBQ1osZ0JBQUlYLFdBQVcsS0FBS1gsSUFBTCxDQUFVVSxJQUFWLENBQWVDLFFBQTlCO0FBQ0EsZ0JBQUlZLFlBQVlsQyxRQUFRbUMsS0FBUixDQUFjQyxNQUFkLENBQXFCSCxHQUFyQixDQUFoQjtBQUNBLGdCQUFJSSxlQUFlZixTQUFTZSxZQUE1Qjs7QUFFQTtBQUNBLGdCQUFJQyxrQkFBa0I7QUFDbEJDLHNCQUFNQyxLQUFLQyxHQUFMLENBQVNuQixTQUFTb0IsQ0FBbEIsQ0FEWTtBQUVsQkMsdUJBQU9ILEtBQUtDLEdBQUwsQ0FBU25CLFNBQVNvQixDQUFULEdBQWMsQ0FBQ0wsWUFBeEI7QUFGVyxhQUF0Qjs7QUFLQSxnQkFBSU8sVUFBVUosS0FBS0MsR0FBTCxDQUFTUCxVQUFVSyxJQUFuQixDQUFkO0FBQ0EsZ0JBQUlNLFdBQVdMLEtBQUtDLEdBQUwsQ0FBU1AsVUFBVVMsS0FBbkIsQ0FBZjs7QUFFQSxnQkFBR0MsV0FBV04sZ0JBQWdCQyxJQUE5QixFQUFvQztBQUNoQyx1QkFBT0ssVUFBVU4sZ0JBQWdCSyxLQUFqQztBQUNIOztBQUVELGdCQUFHRSxXQUFXUCxnQkFBZ0JDLElBQTlCLEVBQW9DO0FBQ2hDLHVCQUFPTSxZQUFZUCxnQkFBZ0JLLEtBQW5DO0FBQ0g7QUFFSjs7O3dDQUVlO0FBQ1osZ0JBQUlHLGtCQUFnQixLQUFLM0MsS0FBTCxDQUFXQyxNQUEvQjtBQUNBLG1CQUFPSyxTQUFTQyxXQUFULENBQXFCLEtBQUtDLElBQUwsQ0FBVW1DLE1BQVYsQ0FBckIsQ0FBUDtBQUNIOzs7cUNBRVkxQyxNLEVBQVEyQyxJLEVBQU1DLEMsRUFBRztBQUMxQixnQkFBSTNDLElBQUksSUFBUjtBQUNBLGdCQUFJNEMsWUFBWTVDLEVBQUVGLEtBQUYsQ0FBUUMsTUFBeEI7QUFDQUMsY0FBRW9CLFFBQUYsQ0FBVztBQUNQckIsd0JBQVFBO0FBREQsYUFBWDtBQUdBQyxjQUFFSCxLQUFGLENBQVFnRCxRQUFSLENBQWlCO0FBQ2I5Qyx3QkFBUUEsTUFESztBQUViNkMsMkJBQVdBLFNBRkU7QUFHYkYsc0JBQU1BLElBSE87QUFJYkMsbUJBQUdBO0FBSlUsYUFBakI7QUFNSDs7O2lDQUVRO0FBQUE7O0FBQ0wsZ0JBQUkzQyxJQUFJLElBQVI7QUFDQSxtQkFBTztBQUFBO0FBQUEsa0JBQUssS0FBSSxNQUFULEVBQWdCLFdBQVdWLDJEQUM3QkksWUFBWSxLQUFaLENBRDZCLEVBQ1IsSUFEUSxnQ0FFN0JNLEVBQUVILEtBQUYsQ0FBUWlELElBRnFCLEVBRWQsSUFGYyxnQ0FHN0I5QyxFQUFFSCxLQUFGLENBQVFrRCxTQUhxQixFQUdULENBQUMsQ0FBQy9DLEVBQUVILEtBQUYsQ0FBUWtELFNBSEQsZ0NBSzlCLFdBTDhCLEVBS2pCLENBQUMsQ0FBQy9DLEVBQUVILEtBQUYsQ0FBUW1ELFFBTE8sZ0NBTTlCLGNBTjhCLEVBTWQsQ0FBQ2hELEVBQUVILEtBQUYsQ0FBUW1ELFFBQVQsSUFBcUIsQ0FBQyxDQUFDaEQsRUFBRUgsS0FBRixDQUFRb0QsV0FOakIsZ0JBQTNCO0FBUUZqRCxrQkFBRWtELFdBQUYsRUFSRTtBQVNGbEQsa0JBQUVtRCxXQUFGLEVBVEU7QUFVRm5ELGtCQUFFSCxLQUFGLENBQVFJLFVBQVIsSUFBc0JELEVBQUVvRCxjQUFGO0FBVnBCLGFBQVA7QUFjSDs7O3NDQUVhO0FBQ1YsZ0JBQUlwRCxJQUFJLElBQVI7QUFDQSxnQkFBSUEsRUFBRUgsS0FBRixDQUFRSSxVQUFaLEVBQXdCO0FBQ3BCO0FBQ0EsdUJBQU87QUFBQyw0QkFBRDtBQUFBLHNCQUFVLFdBQVdQLFlBQVksVUFBWixDQUFyQixFQUE4QyxTQUFTLElBQXZELEVBQTZELFNBQVMsS0FBdEUsRUFBNkUsS0FBSSxNQUFqRjtBQUNGTSxzQkFBRXFELGtCQUFGLENBQXFCLElBQXJCLEVBQTJCckQsQ0FBM0I7QUFERSxpQkFBUDtBQUdILGFBTEQsTUFLTztBQUNILHVCQUFPO0FBQUE7QUFBQSxzQkFBSyxXQUFXTixZQUFZLFVBQVosQ0FBaEIsRUFBeUMsS0FBSSxNQUE3QztBQUNGTSxzQkFBRXFELGtCQUFGLENBQXFCLEtBQXJCLEVBQTRCckQsQ0FBNUI7QUFERSxpQkFBUDtBQUlIO0FBQ0o7OzsyQ0FFa0JPLE0sRUFBUVAsQyxFQUFHO0FBQUE7O0FBQzFCLG1CQUFPO0FBQUE7QUFBQSxrQkFBSyxXQUFXViw2REFDbEJJLFlBQVksaUJBQVosQ0FEa0IsRUFDZWEsTUFEZixpQ0FFbEJiLFlBQVksb0JBQVosQ0FGa0IsRUFFa0IsSUFGbEIsaUNBR2xCQSxZQUFZLElBQVosQ0FIa0IsRUFHRWEsTUFIRixpQ0FJbEJiLFlBQVksS0FBWixDQUprQixFQUlHLENBQUNhLE1BSkosaUJBQWhCLEVBS0gsS0FBSSxRQUxEO0FBT0NuQixzQkFBTWtFLFFBQU4sQ0FBZUMsR0FBZixDQUFtQnZELEVBQUVILEtBQUYsQ0FBUTJELFFBQTNCLEVBQXFDLFVBQUNDLEtBQUQsRUFBUTFELE1BQVIsRUFBbUI7QUFBQTs7QUFDcEQsd0JBQUkyRCxhQUFhcEUsNkRBQ1pJLFlBQVksZUFBWixDQURZLEVBQ21CLElBRG5CLGlDQUVaQSxZQUFZLEtBQVosQ0FGWSxFQUVTLElBRlQsaUNBR1pBLFlBQVksSUFBWixDQUhZLEVBR1FhLE1BSFIsaUNBSVpiLFlBQVksS0FBWixDQUpZLEVBSVMsQ0FBQ2EsTUFKVixpQ0FLYixRQUxhLEVBS0hQLEVBQUVGLEtBQUYsQ0FBUUMsTUFBUixJQUFrQkEsTUFMZixpQkFBakI7QUFPQSwyQkFBTztBQUFBO0FBQUEsMEJBQUssV0FBVzJELFVBQWhCLEVBQTRCLEtBQUszRCxNQUFqQyxFQUF5QyxRQUFRQSxNQUFqRCxFQUF5RCxjQUFZQSxNQUFyRTtBQUNLLHFDQUFTQyxFQUFFMkQsWUFBRixDQUFlQyxJQUFmLENBQW9CNUQsQ0FBcEIsRUFBdUJELE1BQXZCLEVBQStCMEQsTUFBTTVELEtBQU4sQ0FBWTZDLElBQTNDLENBRGQ7QUFFSDtBQUFBO0FBQUE7QUFBT2Usa0NBQU01RCxLQUFOLENBQVlnRTtBQUFuQjtBQUZHLHFCQUFQO0FBSUgsaUJBWkQ7QUFQRCxhQUFQO0FBdUJIOzs7eUNBRWdCO0FBQ2I7QUFDQSxnQkFBSTdELElBQUksSUFBUjtBQUNBLGdCQUFJOEQsVUFBVTlELEVBQUVILEtBQUYsQ0FBUWlFLE9BQXRCOztBQUVBLGdCQUFHQSxXQUFXMUUsTUFBTTJFLGNBQU4sQ0FBcUJELE9BQXJCLENBQWQsRUFBNkM7QUFDekMsdUJBQU8xRSxNQUFNNEUsWUFBTixDQUFtQkYsT0FBbkIsRUFBNEI7QUFDL0JHLDBCQUFNO0FBRHlCLGlCQUE1QixDQUFQO0FBR0g7QUFDSjs7O3NDQUVhO0FBQ1YsZ0JBQUlqRSxJQUFJLElBQVI7QUFDQSxnQkFBSWtFLGFBQWEsRUFBakI7O0FBRUE5RSxrQkFBTWtFLFFBQU4sQ0FBZWEsT0FBZixDQUF1Qm5FLEVBQUVILEtBQUYsQ0FBUTJELFFBQS9CLEVBQXlDLFVBQUNDLEtBQUQsRUFBUTFELE1BQVIsRUFBbUI7QUFBQTs7QUFDeEQsb0JBQUkyRCxhQUFhcEUsNkRBQ1pJLFlBQVksZUFBWixDQURZLEVBQ21CLElBRG5CLGlDQUVaQSxZQUFZLE1BQVosQ0FGWSxFQUVVTSxFQUFFRixLQUFGLENBQVFDLE1BQVIsS0FBbUJBLE1BRjdCLGlCQUFqQjtBQUlBbUUsMkJBQVdFLElBQVgsQ0FDSTtBQUFBO0FBQUEsc0JBQUssV0FBV1YsVUFBaEIsRUFBNEIsS0FBSzNELE1BQWpDLEVBQXlDLFFBQVFDLEVBQUVGLEtBQUYsQ0FBUUMsTUFBUixLQUFtQkEsTUFBcEU7QUFBNkUwRDtBQUE3RSxpQkFESjtBQUdILGFBUkQ7O0FBVUEsZ0JBQUl6RCxFQUFFSCxLQUFGLENBQVF3RSxzQkFBWixFQUFvQztBQUNoQ0gsNkJBQWFBLFdBQVdJLE1BQVgsQ0FBa0IsVUFBQ0MsSUFBRCxFQUFVO0FBQ3JDLDJCQUFPQSxLQUFLMUUsS0FBTCxDQUFXRSxNQUFsQjtBQUNILGlCQUZZLENBQWI7QUFHSDs7QUFFRCxtQkFDSTtBQUFBO0FBQUEsa0JBQUssV0FBV0wsWUFBWSxVQUFaLENBQWhCO0FBRVF3RTtBQUZSLGFBREo7QUFPSDs7OztFQXBNYTlFLE1BQU1vRixTOztBQXVNeEI1RSxJQUFJNkUsWUFBSixHQUFtQjtBQUNmMUUsWUFBUSxDQURPO0FBRWYrQyxVQUFNLEVBRlM7QUFHZkQsY0FBVXRELFFBQVFtRixJQUhIO0FBSWZ6RSxnQkFBWSxLQUpHO0FBS2ZvRSw0QkFBd0IsS0FMVDtBQU1mO0FBQ0FyQixjQUFVLEtBUEs7QUFRZjtBQUNBQyxpQkFBYTtBQVRFLENBQW5COztBQVlBO0FBQ0FyRCxJQUFJK0UsU0FBSixHQUFnQjtBQUNaNUUsWUFBUVgsTUFBTXdGLFNBQU4sQ0FBZ0JDLE1BRFo7QUFFWi9CLFVBQU0xRCxNQUFNd0YsU0FBTixDQUFnQkUsS0FBaEIsQ0FBc0IsQ0FBQyxFQUFELEVBQUssT0FBTCxDQUF0QixDQUZNO0FBR1pqQyxjQUFVekQsTUFBTXdGLFNBQU4sQ0FBZ0JHLElBSGQ7QUFJWjlFLGdCQUFZYixNQUFNd0YsU0FBTixDQUFnQkksSUFKaEI7QUFLWlgsNEJBQXdCakYsTUFBTXdGLFNBQU4sQ0FBZ0JJLElBTDVCO0FBTVpsQixhQUFTMUUsTUFBTXdGLFNBQU4sQ0FBZ0JLLE9BTmI7QUFPWmpDLGNBQVU1RCxNQUFNd0YsU0FBTixDQUFnQkksSUFQZDtBQVFaL0IsaUJBQWE3RCxNQUFNd0YsU0FBTixDQUFnQkk7QUFSakIsQ0FBaEI7O0FBV0FwRixJQUFJc0YsSUFBSixHQUFXekYsT0FBWDtBQUNBRyxJQUFJdUYsV0FBSixHQUFrQixLQUFsQjs7QUFFQUMsT0FBT0MsT0FBUCxHQUFpQnpGLEdBQWpCIiwiZmlsZSI6IlRhYi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGFiIENvbXBvbmVudCBmb3IgdGluZ2xlXG4gKiBAYXV0aG9yIHpoYW5nc2h1bkBhbGlwYXkuY29tXG4gKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNiwgVGluZ2xlIFRlYW0uXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5jb25zdCBjbGFzc25hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xuY29uc3QgQ29udGV4dCA9IHJlcXVpcmUoJ0BhbGkvdGluZ2xlLWNvbnRleHQnKTtcbmNvbnN0IFNjcm9sbGVyID0gcmVxdWlyZSgnQGFsaS90aW5nbGUtc2Nyb2xsZXInKTtcbmNvbnN0IFRhYkl0ZW0gPSByZXF1aXJlKCcuL1RhYkl0ZW0nKTtcbmxldCBwcmVmaXhDbGFzcyA9IENvbnRleHQucHJlZml4Q2xhc3M7XG5jb25zdCBpU2Nyb2xsID0gcmVxdWlyZShcIkBhbGkvdGluZ2xlLXNjcm9sbGVyL2Rpc3QvaXNjcm9sbFwiKTtcblxuY2xhc3MgVGFiIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGFjdGl2ZTogcHJvcHMuYWN0aXZlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgLy8g6K6h566X5a695bqm5ZKM5rua5YqoXG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgaWYgKCF0LnByb3BzLnNob3dTY3JvbGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdyA9IDA7XG4gICAgICAgIGxldCBzY3JvbGxFbCA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHQucmVmcy5zY3JvbGwpO1xuICAgICAgICBsZXQgY2hOb2RlcyA9IHNjcm9sbEVsLmNoaWxkTm9kZXM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gY2hOb2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHcgKz0gY2hOb2Rlc1tpXS5vZmZzZXRXaWR0aCArIDE7XG4gICAgICAgIH1cblxuICAgICAgICBzY3JvbGxFbC5zdHlsZS53aWR0aCA9IHcgKyBcInB4XCI7XG4gICAgICAgIC8vIOWunuS+i+WMlua7muWKqFxuICAgICAgICB0LnJlZnMuaGVhZC5zY3JvbGxlci5yZWZyZXNoKCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICBpZiAobmV4dFByb3BzLmFjdGl2ZSAhPT0gdC5zdGF0ZS5hY3RpdmUpIHtcbiAgICAgICAgICAgIHQuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGFjdGl2ZTogbmV4dFByb3BzLmFjdGl2ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgLy9maXggaXNzdWUgIzhcbiAgICAgICAgaWYodGhpcy5zdGF0ZS5hY3RpdmUgIT09IHByZXZTdGF0ZS5hY3RpdmUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlVGFiSXRlbVZpc2libGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEFjdGl2ZVRhYkl0ZW1WaXNpYmxlKCkge1xuICAgICAgICBpZighdGhpcy5wcm9wcy5zaG93U2Nyb2xsKSB7XG4gICAgICAgICAgICAvL+ayoeaciXNjcm9sbOeahOaXtuWAme+8jGFjdGl2ZSB0YWLlv4XnhLbmmK/lj6/op4HnmoRcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFjdGl2ZVRhYiA9IHRoaXMuZmluZEFjdGl2ZVRhYigpO1xuICAgICAgICBpZighdGhpcy50YWJWaXNpYmxlKGFjdGl2ZVRhYikpIHtcbiAgICAgICAgICAgIHRoaXMucmVmcy5oZWFkLnNjcm9sbGVyLnNjcm9sbFRvRWxlbWVudChhY3RpdmVUYWIsICdhdXRvJywgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0YWJWaXNpYmxlKHRhYikge1xuICAgICAgICB2YXIgc2Nyb2xsZXIgPSB0aGlzLnJlZnMuaGVhZC5zY3JvbGxlcjtcbiAgICAgICAgdmFyIHRhYk9mZnNldCA9IGlTY3JvbGwudXRpbHMub2Zmc2V0KHRhYik7XG4gICAgICAgIHZhciB3cmFwcGVyV2lkdGggPSBzY3JvbGxlci53cmFwcGVyV2lkdGg7XG5cbiAgICAgICAgLy9zY3JvbGzkvb/nlKjnmoRvZmZzZXTlg4/ntKDlnZDmoIfpg73mmK/otJ/lgLzvvIzkvb/nlKjnmoTml7blgJnlgZpNYXRoLmFic+WkhOeQhu+8jOaWueS+v+iuoeeul1xuICAgICAgICB2YXIgaGVhZE9mZnNldFJhbmdlID0ge1xuICAgICAgICAgICAgbGVmdDogTWF0aC5hYnMoc2Nyb2xsZXIueCksXG4gICAgICAgICAgICByaWdodDogTWF0aC5hYnMoc2Nyb2xsZXIueCArICgtd3JhcHBlcldpZHRoKSlcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgdGFiTGVmdCA9IE1hdGguYWJzKHRhYk9mZnNldC5sZWZ0KTtcbiAgICAgICAgdmFyIHRhYlJpZ2h0ID0gTWF0aC5hYnModGFiT2Zmc2V0LnJpZ2h0KTtcblxuICAgICAgICBpZih0YWJMZWZ0ID49IGhlYWRPZmZzZXRSYW5nZS5sZWZ0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGFiTGVmdCA8IGhlYWRPZmZzZXRSYW5nZS5yaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRhYlJpZ2h0IDwgaGVhZE9mZnNldFJhbmdlLmxlZnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0YWJSaWdodCA8PSBoZWFkT2Zmc2V0UmFuZ2UucmlnaHQ7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGZpbmRBY3RpdmVUYWIoKSB7XG4gICAgICAgIHZhciByZWZLZXkgPSBgdGFiXyR7dGhpcy5zdGF0ZS5hY3RpdmV9YDtcbiAgICAgICAgcmV0dXJuIFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMucmVmc1tyZWZLZXldKTtcbiAgICB9XG5cbiAgICBoYW5kbGVDaGFuZ2UoYWN0aXZlLCBkYXRhLCBlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgbGV0IHByZUFjdGl2ZSA9IHQuc3RhdGUuYWN0aXZlO1xuICAgICAgICB0LnNldFN0YXRlKHtcbiAgICAgICAgICAgIGFjdGl2ZTogYWN0aXZlXG4gICAgICAgIH0pO1xuICAgICAgICB0LnByb3BzLm9uQ2hhbmdlKHtcbiAgICAgICAgICAgIGFjdGl2ZTogYWN0aXZlLFxuICAgICAgICAgICAgcHJlQWN0aXZlOiBwcmVBY3RpdmUsXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgZTogZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIDxkaXYgcmVmPSdyb290JyBjbGFzc05hbWU9e2NsYXNzbmFtZXMoe1xuICAgICAgICAgICAgW3ByZWZpeENsYXNzKCd0YWInKV06IHRydWUsXG4gICAgICAgICAgICBbdC5wcm9wcy50eXBlXTogdHJ1ZSxcbiAgICAgICAgICAgIFt0LnByb3BzLmNsYXNzTmFtZV06ICEhdC5wcm9wcy5jbGFzc05hbWUsXG4gICAgICAgICAgICAvL+WbuumhtuWSjOWbuuW6leS4jeiDveWQjOaXtueUn+aViO+8jOS4lOW3suWbuumhtuS8mOWFiFxuICAgICAgICAgICAgXCJmaXhlZC10b3BcIjogISF0LnByb3BzLmZpeGVkVG9wLFxuICAgICAgICAgICAgXCJmaXhlZC1ib3R0b21cIjogIXQucHJvcHMuZml4ZWRUb3AgJiYgISF0LnByb3BzLmZpeGVkQm90dG9tLFxuICAgICAgICB9KX0+XG4gICAgICAgICAgICB7dC5fcmVuZGVySGVhZCgpfVxuICAgICAgICAgICAge3QuX3JlbmRlckJvZHkoKX1cbiAgICAgICAgICAgIHt0LnByb3BzLnNob3dTY3JvbGwgJiYgdC5fcmVuZGVyUGVuZGFudCgpfVxuICAgICAgICA8L2Rpdj47XG5cblxuICAgIH1cblxuICAgIF9yZW5kZXJIZWFkKCkge1xuICAgICAgICBsZXQgdCA9IHRoaXM7XG4gICAgICAgIGlmICh0LnByb3BzLnNob3dTY3JvbGwpIHtcbiAgICAgICAgICAgIC8v5re75Yqg5Y+z6L65aWNvblxuICAgICAgICAgICAgcmV0dXJuIDxTY3JvbGxlciBjbGFzc05hbWU9e3ByZWZpeENsYXNzKCd0YWItaGVhZCcpfSBzY3JvbGxYPXt0cnVlfSBzY3JvbGxZPXtmYWxzZX0gcmVmPVwiaGVhZFwiPlxuICAgICAgICAgICAgICAgIHt0Ll9yZW5kZXJIZWFkQ29udGVudCh0cnVlLCB0KX1cbiAgICAgICAgICAgIDwvU2Nyb2xsZXI+XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e3ByZWZpeENsYXNzKCd0YWItaGVhZCcpfSByZWY9XCJoZWFkXCI+XG4gICAgICAgICAgICAgICAge3QuX3JlbmRlckhlYWRDb250ZW50KGZhbHNlLCB0KX1cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcmVuZGVySGVhZENvbnRlbnQoc2Nyb2xsLCB0KSB7XG4gICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NuYW1lcyh7XG4gICAgICAgICAgICBbcHJlZml4Q2xhc3MoJ3RhYi1oZWFkLXNjcm9sbCcpXTogc2Nyb2xsLFxuICAgICAgICAgICAgW3ByZWZpeENsYXNzKCd0YWItaGVhZC1jb250YWluZXInKV06IHRydWUsXG4gICAgICAgICAgICBbcHJlZml4Q2xhc3MoJ0NMJyldOiBzY3JvbGwsXG4gICAgICAgICAgICBbcHJlZml4Q2xhc3MoJ0ZCSCcpXTogIXNjcm9sbFxuICAgICAgICB9KX0gcmVmPVwic2Nyb2xsXCI+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgUmVhY3QuQ2hpbGRyZW4ubWFwKHQucHJvcHMuY2hpbGRyZW4sIChjaGlsZCwgYWN0aXZlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBfY2xhc3NOYW1lID0gY2xhc3NuYW1lcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBbcHJlZml4Q2xhc3MoJ3RhYi1oZWFkLWl0ZW0nKV06IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBbcHJlZml4Q2xhc3MoJ0ZBQycpXTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFtwcmVmaXhDbGFzcygnRkwnKV06IHNjcm9sbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFtwcmVmaXhDbGFzcygnRkIxJyldOiAhc2Nyb2xsLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2FjdGl2ZSc6IHQuc3RhdGUuYWN0aXZlID09IGFjdGl2ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXtfY2xhc3NOYW1lfSBrZXk9e2FjdGl2ZX0gYWN0aXZlPXthY3RpdmV9IHJlZj17YHRhYl8ke2FjdGl2ZX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0LmhhbmRsZUNoYW5nZS5iaW5kKHQsIGFjdGl2ZSwgY2hpbGQucHJvcHMuZGF0YSl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2NoaWxkLnByb3BzLnRpdGxlfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgPC9kaXY+XG5cbiAgICB9XG5cbiAgICBfcmVuZGVyUGVuZGFudCgpIHtcbiAgICAgICAgLy/muLLmn5Plj7Povrnoh6rlrprkuYnnmoTlsI/pm7bku7ZcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICBsZXQgcGVuZGFudCA9IHQucHJvcHMucGVuZGFudDtcblxuICAgICAgICBpZihwZW5kYW50ICYmIFJlYWN0LmlzVmFsaWRFbGVtZW50KHBlbmRhbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KHBlbmRhbnQsIHtcbiAgICAgICAgICAgICAgICByb2xlOiBcInBlbmRhbnRcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfcmVuZGVyQm9keSgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICBsZXQgYWN0aXZlQm9keSA9IFtdO1xuXG4gICAgICAgIFJlYWN0LkNoaWxkcmVuLmZvckVhY2godC5wcm9wcy5jaGlsZHJlbiwgKGNoaWxkLCBhY3RpdmUpID0+IHtcbiAgICAgICAgICAgIGxldCBfY2xhc3NOYW1lID0gY2xhc3NuYW1lcyh7XG4gICAgICAgICAgICAgICAgW3ByZWZpeENsYXNzKCd0YWItYm9keS1pdGVtJyldOiB0cnVlLFxuICAgICAgICAgICAgICAgIFtwcmVmaXhDbGFzcygnaGlkZScpXTogdC5zdGF0ZS5hY3RpdmUgIT09IGFjdGl2ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhY3RpdmVCb2R5LnB1c2goXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e19jbGFzc05hbWV9IGtleT17YWN0aXZlfSBhY3RpdmU9e3Quc3RhdGUuYWN0aXZlID09PSBhY3RpdmV9PntjaGlsZH08L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0LnByb3BzLmRlc3Ryb3lJbmFjdGl2ZVRhYlBhbmUpIHtcbiAgICAgICAgICAgIGFjdGl2ZUJvZHkgPSBhY3RpdmVCb2R5LmZpbHRlcigoYm9keSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBib2R5LnByb3BzLmFjdGl2ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtwcmVmaXhDbGFzcygndGFiLWJvZHknKX0+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVCb2R5XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5UYWIuZGVmYXVsdFByb3BzID0ge1xuICAgIGFjdGl2ZTogMCxcbiAgICB0eXBlOiAnJyxcbiAgICBvbkNoYW5nZTogQ29udGV4dC5ub29wLFxuICAgIHNob3dTY3JvbGw6IGZhbHNlLFxuICAgIGRlc3Ryb3lJbmFjdGl2ZVRhYlBhbmU6IGZhbHNlLFxuICAgIC8v5Zu65a6a6aG26YOoXG4gICAgZml4ZWRUb3A6IGZhbHNlLFxuICAgIC8v5Zu65a6a5bqV6YOoXG4gICAgZml4ZWRCb3R0b206IGZhbHNlLFxufTtcblxuLy8gaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL3JldXNhYmxlLWNvbXBvbmVudHMuaHRtbFxuVGFiLnByb3BUeXBlcyA9IHtcbiAgICBhY3RpdmU6IFJlYWN0LlByb3BUeXBlcy5udW1iZXIsXG4gICAgdHlwZTogUmVhY3QuUHJvcFR5cGVzLm9uZU9mKFsnJywgJ2JyaWNrJ10pLFxuICAgIG9uQ2hhbmdlOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYyxcbiAgICBzaG93U2Nyb2xsOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcbiAgICBkZXN0cm95SW5hY3RpdmVUYWJQYW5lOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcbiAgICBwZW5kYW50OiBSZWFjdC5Qcm9wVHlwZXMuZWxlbWVudCxcbiAgICBmaXhlZFRvcDogUmVhY3QuUHJvcFR5cGVzLmJvb2wsXG4gICAgZml4ZWRCb3R0b206IFJlYWN0LlByb3BUeXBlcy5ib29sLFxufTtcblxuVGFiLkl0ZW0gPSBUYWJJdGVtO1xuVGFiLmRpc3BsYXlOYW1lID0gJ1RhYic7XG5cbm1vZHVsZS5leHBvcnRzID0gVGFiO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
